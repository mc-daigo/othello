Next.jsã§ã¯ä¸€æ˜”å‰ã¯ src/pages/_app.jsx ãŒå­˜åœ¨ã—
stateã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã®æ©Ÿèƒ½ã§<Compnent >ã«propsã‚’ä½¿ã„ã€å€¤ã‚’pageså†…ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šåŒ–ã§ããŸã‚‰ã—ã„ãŒ
æœ€è¿‘ã§ã¯ src/pages/_app.jsx ãŒä½œæˆã•ã‚Œãªããªã‚Šã€ã‹ã‚ã‚Šã«
src/app/layout.tsx ãªã©ã«ç½®ãæ›ã‚ã£ãŸã‚‰ã—ã„ã€‚

ã“ã®å ´åˆã©ã†ã™ã‚Œã°å€¤ã®å…±é€šåŒ–ãŒã§ãã‚‹ã‹ï¼Ÿ

-----------------------------------

æœ€è¿‘ã®Next.jsï¼ˆApp Routerï¼‰ã§ã¯ã€_app.jsx ã®ä»£ã‚ã‚Šã« layout.tsx ã‚„ template.tsx ãŒå„ãƒ«ãƒ¼ãƒˆã”ã¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚’å®šç¾©ã™ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€çŠ¶æ…‹ã‚„å€¤ã®å…±é€šåŒ–ã‚’å®Ÿç¾ã™ã‚‹ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ãªæ–¹æ³•ãŒä½¿ãˆã¾ã™ã€‚

æ–¹æ³• 1: React Context API ã‚’ä½¿ç”¨
App Routerã§ã‚‚ã€Reactã®Context APIã‚’ä½¿ç”¨ã—ã¦å€¤ã‚’ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±é€šåŒ–ã™ã‚‹ã®ãŒæ¨™æº–çš„ãªæ–¹æ³•ã§ã™ã€‚

ä¾‹: ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ã‚’æä¾›ã™ã‚‹ layout.tsx
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/context/GlobalStateContext.tsx
"use client"; // å¿…é ˆ

import React, { createContext, useState, useContext, ReactNode } from "react";

// Contextã®ä½œæˆ
const GlobalStateContext = createContext(null);

export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  const [sharedValue, setSharedValue] = useState("åˆæœŸå€¤");

  return (
    <GlobalStateContext.Provider value={{ sharedValue, setSharedValue }}>
      {children}
    </GlobalStateContext.Provider>
  );
};

// çŠ¶æ…‹ã‚’ç°¡å˜ã«åˆ©ç”¨ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
export const useGlobalState = () => {
  const context = useContext(GlobalStateContext);
  if (!context) {
    throw new Error("useGlobalState must be used within GlobalStateProvider");
  }
  return context;
};
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/layout.tsx
import { GlobalStateProvider } from "./context/GlobalStateContext";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        <GlobalStateProvider>{children}</GlobalStateProvider>
      </body>
    </html>
  );
}
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/page.tsx
"use client"; // å¿…é ˆ
import { useGlobalState } from "./context/GlobalStateContext";

export default function Page() {
  const { sharedValue, setSharedValue } = useGlobalState();

  return (
    <div>
      <p>å…±æœ‰çŠ¶æ…‹: {sharedValue}</p>
      <button onClick={() => setSharedValue("æ–°ã—ã„å€¤")}>å€¤ã‚’å¤‰æ›´</button>
    </div>
  );
}
æ–¹æ³• 2: Zustand ã‚„ Redux ã‚’ä½¿ç”¨
ã‚‚ã—å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ã§ã‚ã‚Œã°ã€Zustand ã‚„ Redux ã¨ã„ã£ãŸå¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã‚‚é©ã—ã¦ã„ã¾ã™ã€‚

ä¾‹: Zustand ã‚’ä½¿ç”¨ã—ãŸã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹ç®¡ç†
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/store/useStore.ts
import { create } from "zustand";

interface GlobalState {
  sharedValue: string;
  setSharedValue: (value: string) => void;
}

const useStore = create<GlobalState>((set) => ({
  sharedValue: "åˆæœŸå€¤",
  setSharedValue: (value) => set({ sharedValue: value }),
}));

export default useStore;
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/page.tsx
"use client"; // Zustandãªã©ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å‹•ä½œã™ã‚‹ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã«ã¯å¿…é ˆ
import useStore from "../store/useStore";

export default function Page() {
  const { sharedValue, setSharedValue } = useStore();

  return (
    <div>
      <p>å…±æœ‰çŠ¶æ…‹: {sharedValue}</p>
      <button onClick={() => setSharedValue("æ–°ã—ã„å€¤")}>å€¤ã‚’å¤‰æ›´</button>
    </div>
  );
}
æ–¹æ³• 3: ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç›´æ¥å€¤ã‚’å…±æœ‰ï¼ˆå˜æ–¹å‘ã®ãƒ‡ãƒ¼ã‚¿æµé€šã®å ´åˆï¼‰
çŠ¶æ…‹ã®å¤‰æ›´ãŒå¿…è¦ãªã„å ´åˆï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰ãªã‚‰ã€ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½¿ã£ã¦å€¤ã‚’ç›´æ¥å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«æµã™ã“ã¨ãŒã§ãã¾ã™ã€‚

tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/layout.tsx
export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  const sharedValue = "ã‚µãƒ¼ãƒãƒ¼ã‹ã‚‰æ¸¡ã•ã‚ŒãŸå€¤";

  return (
    <html lang="en">
      <body>
        <Layout sharedValue={sharedValue}>{children}</Layout>
      </body>
    </html>
  );
}

function Layout({
  children,
  sharedValue,
}: {
  children: React.ReactNode;
  sharedValue: string;
}) {
  return (
    <div>
      <header>å…±æœ‰å€¤: {sharedValue}</header>
      {children}
    </div>
  );
}
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/page.tsx
export default function Page({
  sharedValue,
}: {
  sharedValue: string;
}) {
  return <div>å—ã‘å–ã£ãŸå…±æœ‰å€¤: {sharedValue}</div>;
}
ã¾ã¨ã‚
åŒæ–¹å‘ãƒ‡ãƒ¼ã‚¿ç®¡ç†ï¼ˆå€¤ã®æ›´æ–°ã‚„çŠ¶æ…‹ã®å¤‰æ›´ãŒå¿…è¦ãªå ´åˆï¼‰:
Context APIï¼ˆå°è¦æ¨¡ã€œä¸­è¦æ¨¡ï¼‰
Zustand ã‚„ Reduxï¼ˆå¤§è¦æ¨¡ã€è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ãŒå¿…è¦ï¼‰
å˜æ–¹å‘ãƒ‡ãƒ¼ã‚¿ã®å…±æœ‰ï¼ˆèª­ã¿å–ã‚Šå°‚ç”¨ï¼‰:
ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§è¦ªã‹ã‚‰å­ã«ç›´æ¥å€¤ã‚’æ¸¡ã™
Context API ã¯å…¬å¼ã®æ¨å¥¨æ–¹æ³•ã§ã‚ã‚Šã€å¤šãã®ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ã§ååˆ†å¯¾å¿œã§ãã¾ã™ã€‚çŠ¶æ…‹ãŒè¤‡é›‘ã«ãªã‚‹å ´åˆã®ã¿å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’æ¤œè¨ã™ã‚‹ã¨è‰¯ã„ã§ã—ã‚‡ã†ã€‚

======================================

Next.jsç‹¬è‡ªã®stateã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã¨ã„ã†æ–¹æ³•ã¯ä½¿ãˆãªã„ã®ã‹ï¼Ÿ


-----------------------------------



Next.jsè‡ªä½“ã«ç‹¬è‡ªã®**ã€Œstateã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã€**æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚çŠ¶æ…‹ç®¡ç†ã«é–¢ã—ã¦ã¯ã€Next.jsã¯ã‚ãã¾ã§Reactã‚’ãƒ™ãƒ¼ã‚¹ã«ã—ã¦ã„ã‚‹ãŸã‚ã€Reactã®ä»•çµ„ã¿ã‚„çŠ¶æ…‹ç®¡ç†ã®æ–¹æ³•ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

ä»¥å‰ã®_app.jsxãŒå­˜åœ¨ã—ã¦ã„ãŸæ™‚ä»£ã®ã‚ˆã†ã«ã€Next.jså›ºæœ‰ã®ä»•çµ„ã¿ã§ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§çŠ¶æ…‹ã‚’å…±é€šåŒ–ã™ã‚‹æ©Ÿèƒ½ãŒæä¾›ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ãŸã ã—ã€ä»¥ä¸‹ã®ã‚ˆã†ã«Reactã¨Next.jsã®æ©Ÿèƒ½ã‚’æ´»ç”¨ã™ã‚‹ã“ã¨ã§ã€çŠ¶æ…‹ã‚’ã€Œãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã€ã—ã¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã§å…±æœ‰ã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚

çŠ¶æ…‹ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã®åŸºæœ¬ï¼ˆReactã®æ©Ÿèƒ½ã‚’åˆ©ç”¨ï¼‰
ä¾‹: çŠ¶æ…‹ã‚’ä¸Šä½ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç®¡ç†
è¦ªãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã§çŠ¶æ…‹ã‚’å®šç¾©ã—ã€å¿…è¦ãªå­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«propsã¨ã—ã¦æ¸¡ã™ã€‚
å¿…è¦ã«å¿œã˜ã¦useContextã§çŠ¶æ…‹ã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã‚’ç°¡ç•¥åŒ–ã€‚
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/layout.tsx
"use client";

import { useState } from "react";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  const [sharedState, setSharedState] = useState("å…±æœ‰ã•ã‚Œã‚‹å€¤");

  return (
    <html lang="en">
      <body>
        {/* å­ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«çŠ¶æ…‹ã‚’æ¸¡ã™ */}
        <Layout sharedState={sharedState} setSharedState={setSharedState}>
          {children}
        </Layout>
      </body>
    </html>
  );
}

function Layout({
  children,
  sharedState,
  setSharedState,
}: {
  children: React.ReactNode;
  sharedState: string;
  setSharedState: (value: string) => void;
}) {
  return (
    <div>
      <header>
        <p>ç¾åœ¨ã®å…±æœ‰çŠ¶æ…‹: {sharedState}</p>
        <button onClick={() => setSharedState("æ–°ã—ã„å€¤")}>å€¤ã‚’å¤‰æ›´</button>
      </header>
      <main>{children}</main>
    </div>
  );
}
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/page.tsx
"use client";

export default function Page({ sharedState }: { sharedState: string }) {
  return <div>å…±æœ‰ã•ã‚ŒãŸçŠ¶æ…‹: {sharedState}</div>;
}
çŠ¶æ…‹ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã‚’Contextã§ç°¡ç•¥åŒ–
è¦ªã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ä½•å±¤ã‚‚çŠ¶æ…‹ã‚’propsã§æ¸¡ã™ã®ã¯æ‰‹é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚ã“ã®å ´åˆã€Reactã®Context APIã‚’ä½¿ç”¨ã™ã‚‹ã¨çŠ¶æ…‹ã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ãŒç°¡å˜ã«ãªã‚Šã¾ã™ã€‚

tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/context/GlobalStateContext.tsx
"use client";

import { createContext, useContext, useState, ReactNode } from "react";

const GlobalStateContext = createContext(null);

export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  const [sharedState, setSharedState] = useState("å…±æœ‰ã•ã‚Œã‚‹å€¤");

  return (
    <GlobalStateContext.Provider value={{ sharedState, setSharedState }}>
      {children}
    </GlobalStateContext.Provider>
  );
};

export const useGlobalState = () => {
  const context = useContext(GlobalStateContext);
  if (!context) {
    throw new Error("useGlobalState must be used within GlobalStateProvider");
  }
  return context;
};
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/layout.tsx
import { GlobalStateProvider } from "./context/GlobalStateContext";

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html lang="en">
      <body>
        <GlobalStateProvider>{children}</GlobalStateProvider>
      </body>
    </html>
  );
}
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// src/app/page.tsx
"use client";

import { useGlobalState } from "./context/GlobalStateContext";

export default function Page() {
  const { sharedState, setSharedState } = useGlobalState();

  return (
    <div>
      <p>å…±æœ‰çŠ¶æ…‹: {sharedState}</p>
      <button onClick={() => setSharedState("æ–°ã—ã„å€¤")}>å€¤ã‚’å¤‰æ›´</button>
    </div>
  );
}
Next.jsç‹¬è‡ªã®ä»•çµ„ã¿ã‚’åˆ©ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿ã®å…±é€šåŒ–
Next.jsã®ç‰¹å¾´ã‚’æ´»ã‹ã—ãŸæ–¹æ³•ã¨ã—ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ãªã‚‚ã®ãŒã‚ã‚Šã¾ã™ã€‚

ã‚µãƒ¼ãƒãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’åˆ©ç”¨: ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰ã§ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ã—ã€è¦ªã‹ã‚‰å­ã«å€¤ã‚’æ¸¡ã™å½¢ã§å…±é€šåŒ–ã—ã¾ã™ã€‚ãŸã ã—ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§çŠ¶æ…‹ã‚’å¤‰æ›´ã™ã‚‹ç”¨é€”ã«ã¯å‘ãã¾ã›ã‚“ã€‚

App Routerã®layout.tsx: çŠ¶æ…‹ç®¡ç†ã§ã¯ãªãã€é™çš„ãªãƒ‡ãƒ¼ã‚¿ã‚’å…±é€šåŒ–ã—ãŸã„å ´åˆã«ä¾¿åˆ©ã€‚

ã¾ã¨ã‚
Next.jsã«ç‹¬è‡ªã®ã€Œstateã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã€æ©Ÿèƒ½ã¯ã‚ã‚Šã¾ã›ã‚“ãŒã€Reactã®åŸºæœ¬çš„ãªæ–¹æ³•ï¼ˆpropsã€Context APIãªã©ï¼‰ã‚’ä½¿ç”¨ã™ã‚‹ã“ã¨ã§ã€ååˆ†ã«çŠ¶æ…‹ã®ãƒªãƒ•ãƒˆã‚¢ãƒƒãƒ—ã¯å®Ÿç¾å¯èƒ½ã§ã™ã€‚

çŠ¶æ…‹ç®¡ç†ãŒè¤‡é›‘ã«ãªã‚‹å ´åˆã«ã¯ã€Redux ã‚„ Zustand ãªã©ã®å¤–éƒ¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å°å…¥ã‚’æ¤œè¨ã™ã‚‹ã“ã¨ã‚‚ãŠå‹§ã‚ã—ã¾ã™ã€‚

======================================

contextã¯è‰²ã€…å•é¡ŒãŒã‚ã£ã¦ã‚ã¾ã‚ŠãŠã™ã™ã‚ã§ããªã„ã¨èã„ãŸã®ã ãŒã©ã†ãªã®ã‹ï¼Ÿ


-----------------------------------

Context APIã«ã¯ä¾¿åˆ©ãªå´é¢ãŒã‚ã‚‹ä¸€æ–¹ã€ç¢ºã‹ã«ã„ãã¤ã‹ã®åˆ¶é™ã‚„å•é¡Œç‚¹ãŒã‚ã‚Šã€ã“ã‚ŒãŒåŸå› ã§**ã€Œå¤§è¦æ¨¡ã¾ãŸã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒé‡è¦ãªãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§ã¯ä½¿ç”¨ã‚’æ§ãˆãŸã»ã†ãŒè‰¯ã„ã€**ã¨è¨€ã‚ã‚Œã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ä»¥ä¸‹ã«Context APIã®å•é¡Œç‚¹ã¨ã€ãã‚Œã‚’è§£æ±ºã™ã‚‹æ–¹æ³•ã‚„ä»£æ›¿æ¡ˆã‚’è©³ã—ãè§£èª¬ã—ã¾ã™ã€‚

Context APIã®å•é¡Œç‚¹
1. å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å•é¡Œ
å•é¡Œç‚¹: Contextã¯ã€å€¤ãŒå¤‰æ›´ã•ã‚Œã‚‹ã¨ãã®Contextã‚’å‚ç…§ã—ã¦ã„ã‚‹ã™ã¹ã¦ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã¾ã™ã€‚
ç‰¹ã«ã€é »ç¹ã«æ›´æ–°ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ï¼ˆä¾‹ãˆã°ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚„å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®çŠ¶æ…‹ï¼‰ã‚’Contextã§ç®¡ç†ã™ã‚‹ã¨ã€ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒæ‚ªåŒ–ã—ã¾ã™ã€‚
ä¾‹:
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const MyContext = createContext(0);

const Parent = () => {
  const [count, setCount] = useState(0);

  return (
    <MyContext.Provider value={count}>
      <button onClick={() => setCount(count + 1)}>Increment</button>
      <Child />
    </MyContext.Provider>
  );
};

const Child = () => {
  const count = useContext(MyContext);
  console.log("Child re-rendered");
  return <p>{count}</p>;
};
å•é¡Œ: countãŒå¤‰æ›´ã•ã‚Œã‚‹ãŸã³ã«ChildãŒå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã•ã‚Œã‚‹ã€‚
2. ä¾å­˜é–¢ä¿‚ã®ãƒˆãƒ¬ãƒ¼ã‚¹ãŒé›£ã—ã„
å•é¡Œç‚¹: Contextã‚’ä½¿ç”¨ã™ã‚‹ã¨ã€çŠ¶æ…‹ãŒã©ã“ã§ã©ã®ã‚ˆã†ã«ä½¿ã‚ã‚Œã¦ã„ã‚‹ã‹ãŒåˆ†ã‹ã‚Šã«ãããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚ç‰¹ã«å¤§è¦æ¨¡ãªã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã§ã¯ã€ã€Œã“ã®çŠ¶æ…‹ãŒã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§å¤‰æ›´ã•ã‚Œã€ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã®ã‹ã€ã‚’æŠŠæ¡ã™ã‚‹ã®ãŒé›£ã—ããªã‚Šã¾ã™ã€‚
3. ãƒ¡ãƒ¢ãƒªãƒªãƒ¼ã‚¯ã®ãƒªã‚¹ã‚¯
å•é¡Œç‚¹: Contextã®æä¾›è€…ï¼ˆProviderï¼‰ãŒäºˆæœŸã›ãšã‚¢ãƒ³ãƒã‚¦ãƒ³ãƒˆã•ã‚Œã‚‹ã¨ã€ãã®Contextã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå£Šã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚
å¯¾ç­–: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«ã‚’æ³¨æ„æ·±ãç®¡ç†ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
4. ãƒ†ã‚¹ãƒˆãŒé›£ã—ã„
å•é¡Œç‚¹: ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹éš›ã€Context Providerã‚’å«ã‚ãªã‘ã‚Œã°ãªã‚‰ãªã„ãŸã‚ã€ãƒ†ã‚¹ãƒˆã‚³ãƒ¼ãƒ‰ãŒè¤‡é›‘ã«ãªã‚ŠãŒã¡ã§ã™ã€‚
Context APIã‚’å®‰å…¨ã«ä½¿ã†æ–¹æ³•
1. Contextã®åˆ†å‰²
è¤‡æ•°ã®Contextã‚’ä½œæˆã—ã€ç”¨é€”ã”ã¨ã«åˆ†å‰²ã—ã¾ã™ã€‚
é »ç¹ã«æ›´æ–°ã•ã‚Œã‚‹ãƒ‡ãƒ¼ã‚¿ã¨ã€ã‚ã¾ã‚Šå¤‰æ›´ã•ã‚Œãªã„ãƒ‡ãƒ¼ã‚¿ã‚’åˆ¥ã€…ã®Contextã«ã™ã‚‹ã“ã¨ã§ã€å†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å½±éŸ¿ã‚’æ¸›ã‚‰ã›ã¾ã™ã€‚
2. ãƒ¡ãƒ¢åŒ–ã‚’æ´»ç”¨ã™ã‚‹
useMemoã‚„useCallbackã‚’åˆ©ç”¨ã—ã¦ã€ä¸è¦ãªå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã‚’é˜²ãã¾ã™ã€‚
ä¾‹:
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const Parent = () => {
  const [count, setCount] = useState(0);
  const value = useMemo(() => count, [count]);

  return (
    <MyContext.Provider value={value}>
      <button onClick={() => setCount(count + 1)}>Increment</button>
      <Child />
    </MyContext.Provider>
  );
};
3. å¿…è¦æœ€ä½é™ã®çŠ¶æ…‹ã ã‘ã‚’Contextã§ç®¡ç†
å…¨ã¦ã®çŠ¶æ…‹ã‚’Contextã§ç®¡ç†ã™ã‚‹ã®ã§ã¯ãªãã€**ã€Œæœ¬å½“ã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹çŠ¶æ…‹ã€**ã ã‘ã«é™å®šã—ã¾ã™ã€‚
ä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚„èªè¨¼çŠ¶æ…‹ã€‚
Context APIã®ä»£æ›¿æ¡ˆ
1. Zustand
Context APIã®ä»£ã‚ã‚Šã«ã€è»½é‡ã§ä½¿ã„ã‚„ã™ã„çŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã€‚
ç‰¹å¾´:
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã„ï¼ˆå†ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°ã®å•é¡Œã‚’è§£æ±ºï¼‰ã€‚
å­¦ç¿’ã‚³ã‚¹ãƒˆãŒä½ã„ã€‚
ä¾‹:
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
import create from "zustand";

const useStore = create((set) => ({
  count: 0,
  increment: () => set((state) => ({ count: state.count + 1 })),
}));

const Counter = () => {
  const { count, increment } = useStore();
  return (
    <div>
      <p>{count}</p>
      <button onClick={increment}>Increment</button>
    </div>
  );
};
2. Redux Toolkit
Reduxã‚’ç°¡å˜ã«åˆ©ç”¨ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã€çŠ¶æ…‹ã®ç®¡ç†ãŒã‚ˆã‚Šç›´æ„Ÿçš„ã«ãªã‚Šã¾ã™ã€‚
ç‰¹ã«ã€å¤§è¦æ¨¡ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚„è¤‡é›‘ãªçŠ¶æ…‹ç®¡ç†ã«é©ã—ã¦ã„ã¾ã™ã€‚
3. Recoil
FacebookãŒé–‹ç™ºã—ãŸçŠ¶æ…‹ç®¡ç†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã§ã€useStateã‚„useContextã®ã‚ˆã†ãªä½¿ã„å‹æ‰‹ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ãªçŠ¶æ…‹ã‚’ç®¡ç†ã§ãã¾ã™ã€‚
ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé–“ã®ä¾å­˜é–¢ä¿‚ã‚’ã‚ˆã‚Šç°¡å˜ã«ç®¡ç†å¯èƒ½ã€‚
çµè«–
Context APIã‚’ä½¿ã†ã¹ãã‚±ãƒ¼ã‚¹:

çŠ¶æ…‹ãŒæ¯”è¼ƒçš„ã‚·ãƒ³ãƒ—ãƒ«ã§ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã«å…±æœ‰ã™ã‚‹å¿…è¦ãŒã‚ã‚‹å ´åˆï¼ˆä¾‹: ãƒ¦ãƒ¼ã‚¶ãƒ¼èªè¨¼æƒ…å ±ã‚„ãƒ†ãƒ¼ãƒè¨­å®šï¼‰ã€‚
ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¸ã®å½±éŸ¿ãŒå°ã•ã„ã¨åˆ¤æ–­ã•ã‚Œã‚‹å ´åˆã€‚
Context APIã‚’é¿ã‘ã‚‹ã¹ãã‚±ãƒ¼ã‚¹:

çŠ¶æ…‹ãŒé »ç¹ã«æ›´æ–°ã•ã‚Œã‚‹å ´åˆã€‚
çŠ¶æ…‹ã®è¦æ¨¡ãŒå¤§ãããªã‚Šã€è¤‡é›‘ã«ä¾å­˜ã™ã‚‹å ´åˆã€‚
çŠ¶æ…‹ç®¡ç†ã®è¦æ¨¡ã‚„ç”¨é€”ã«å¿œã˜ã¦ã€Zustandã‚„Redux Toolkitã®ã‚ˆã†ãªä»£æ›¿æ‰‹æ®µã‚’æ¤œè¨ã™ã‚‹ã¨è‰¯ã„ã§ã™ã€‚




=========================================
ä»¥å‰ã€ä»¥ä¸‹ã®Reactã®contextã®æ–‡ç« ã®ä¾‹ã‚’ä½œã£ã¦ã‚‚ã‚‰ã£ãŸã€‚
ã“ã®æ–‡ç« ã®
export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
ã®{ children }: { children: ReactNode }
ã®æ„å‘³ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§æ•™ãˆã¦ã»ã—ã„ã€‚

ãã‚Œã¨TypeSciptã¨Next.jsã‚’ä½¿ã£ãŸç°¡å˜ãªcontextã®æ–‡ä¾‹ã‚’ä½œã£ã¦ã»ã—ã„ã€‚



// src/app/context/GlobalStateContext.tsx
------------------------

"use client"; // å¿…é ˆ

import React, { createContext, useState, useContext, ReactNode } from "react";

// Contextã®ä½œæˆ
const GlobalStateContext = createContext(null);

export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  const [sharedValue, setSharedValue] = useState("åˆæœŸå€¤");

  return (
    <GlobalStateContext.Provider value={{ sharedValue, setSharedValue }}>
      {children}
    </GlobalStateContext.Provider>
  );
};

// çŠ¶æ…‹ã‚’ç°¡å˜ã«åˆ©ç”¨ã™ã‚‹ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
export const useGlobalState = () => {
  const context = useContext(GlobalStateContext);
  if (!context) {
    throw new Error("useGlobalState must be used within GlobalStateProvider");
  }
  return context;
};


// src/app/layout.tsx
------------------------

import { GlobalStateProvider } from "./context/GlobalStateContext";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        <GlobalStateProvider>{children}</GlobalStateProvider>
      </body>
    </html>
  );
}


// src/app/page.tsx
------------------------

"use client"; // å¿…é ˆ
import { useGlobalState } from "./context/GlobalStateContext";

export default function Page() {
  const { sharedValue, setSharedValue } = useGlobalState();

  return (
    <div>
      <p>å…±æœ‰çŠ¶æ…‹: {sharedValue}</p>
      <button onClick={() => setSharedValue("æ–°ã—ã„å€¤")}>å€¤ã‚’å¤‰æ›´</button>
    </div>
  );
}





------------------------------------------------------------

1. { children }: { children: ReactNode } ã®æ„å‘³
ã“ã®æ§‹æ–‡ã¯ã€TypeScriptã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆ†å‰²ä»£å…¥ã¨å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã‚’çµ„ã¿åˆã‚ã›ãŸã‚‚ã®ã§ã™ã€‚

æ§‹æ–‡ã®è§£èª¬
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode })
{ children }:

å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰childrenãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’åˆ†å‰²ä»£å…¥ã—ã¦å–ã‚Šå‡ºã—ã¾ã™ã€‚
ä¾‹ãˆã°ã€å‘¼ã³å‡ºã—å…ƒãŒä»¥ä¸‹ã®ã‚ˆã†ãªå½¢ã ã¨ã—ã¾ã™:
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
<GlobalStateProvider>
  <div>Hello</div>
</GlobalStateProvider>
ã“ã®ã¨ãã€childrenã¯<div>Hello</div>ã«ç›¸å½“ã—ã¾ã™ã€‚
{ children: ReactNode }:

childrenãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’ReactNodeã¨æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
ReactNodeã¯Reactã®å‹ã§ã€æ–‡å­—åˆ—ãƒ»æ•°å€¤ãƒ»Reactè¦ç´ ãƒ»nullãƒ»undefinedãªã©ã®ã€Œãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯èƒ½ãªã™ã¹ã¦ã®è¦ç´ ã€ã‚’è¡¨ã—ã¾ã™ã€‚
ã¤ã¾ã‚Šã€childrenã«ã¯æœ‰åŠ¹ãªReactã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„è¦ç´ ã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
2. TypeScriptã¨Next.jsã‚’ä½¿ã£ãŸç°¡å˜ãªcontextã®ä¾‹
ä»¥ä¸‹ã¯ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®çŠ¶æ…‹ã‚’Contextã‚’ä½¿ã£ã¦ç®¡ç†ã™ã‚‹ä¾‹ã§ã™ã€‚

CounterContext.tsx
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
"use client";

import React, { createContext, useState, useContext, ReactNode } from "react";

// Contextã®ä½œæˆ
const CounterContext = createContext<{
  count: number;
  increment: () => void;
  decrement: () => void;
} | null>(null);

// Providerã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
export const CounterProvider = ({ children }: { children: ReactNode }) => {
  const [count, setCount] = useState(0);

  const increment = () => setCount((prev) => prev + 1);
  const decrement = () => setCount((prev) => prev - 1);

  return (
    <CounterContext.Provider value={{ count, increment, decrement }}>
      {children}
    </CounterContext.Provider>
  );
};

// ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯
export const useCounter = () => {
  const context = useContext(CounterContext);
  if (!context) {
    throw new Error("useCounter must be used within CounterProvider");
  }
  return context;
};
layout.tsx
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
import { CounterProvider } from "./context/CounterContext";

export default function RootLayout({
  children,
}: {
  children: React.ReactNode;
}) {
  return (
    <html lang="en">
      <body>
        <CounterProvider>{children}</CounterProvider>
      </body>
    </html>
  );
}
page.tsx
tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
"use client";

import { useCounter } from "./context/CounterContext";

export default function Page() {
  const { count, increment, decrement } = useCounter();

  return (
    <div>
      <h1>ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼: {count}</h1>
      <button onClick={increment}>å¢—åŠ </button>
      <button onClick={decrement}>æ¸›å°‘</button>
    </div>
  );
}
å®Ÿè¡Œçµæœ
ãƒšãƒ¼ã‚¸ã‚’é–‹ãã¨ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®ç¾åœ¨å€¤ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚
ã€Œå¢—åŠ ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ãŒ1å¢—åŠ ã—ã€ã€Œæ¸›å°‘ã€ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨1æ¸›å°‘ã—ã¾ã™ã€‚
çŠ¶æ…‹ã¯Contextã‚’é€šã˜ã¦ç®¡ç†ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã‚‚ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã§ã™ã€‚
è§£èª¬ãƒã‚¤ãƒ³ãƒˆ
Providerã§çŠ¶æ…‹ã‚’ãƒ©ãƒƒãƒ—:

å…¨ä½“ã®çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹Providerã‚’ãƒ«ãƒ¼ãƒˆã§ãƒ©ãƒƒãƒ—ã—ã¾ã™ã€‚
useContextã‚’ä½¿ã†ã¨ã€ã©ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ã§ã‚‚ã“ã®çŠ¶æ…‹ã«ã‚¢ã‚¯ã‚»ã‚¹å¯èƒ½ã€‚
ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ã®åˆ©ç”¨:

useCounterã‚’ä½œã‚‹ã“ã¨ã§ã€useContextã®åˆ©ç”¨ã‚’ç°¡ç•¥åŒ–ã—ã€å†åˆ©ç”¨å¯èƒ½ãªãƒ­ã‚¸ãƒƒã‚¯ã‚’æ•´ç†ã§ãã¾ã™ã€‚
å‹å®‰å…¨ãªçŠ¶æ…‹ç®¡ç†:

Contextã‚„useStateã®å‹ã‚’æ˜ç¤ºã™ã‚‹ã“ã¨ã§ã€å‹ãƒã‚§ãƒƒã‚¯ãŒåŠ¹ãã‚³ãƒ¼ãƒ‰ã‚’å®Ÿç¾ã§ãã¾ã™ã€‚
ã“ã®æ§‹æˆã‚’ãƒ™ãƒ¼ã‚¹ã«ã€ä»–ã®çŠ¶æ…‹ç®¡ç†ã«ã‚‚å¿œç”¨ã§ãã¾ã™ï¼



=========================================
({ children }: { children: ReactNode })
ã®æ„å‘³ãŒå…¨ç„¶ã‚ã‹ã‚‰ãªã„ã®ã§æ•™ãˆã¦ã»ã—ã„ã€‚

ãƒ»æœ€åˆã¨äºŒç•ªç›®ã®childrenã¯åˆ¥ç‰©ã‹ï¼Ÿ
ã€€ä¸€è¦‹{ children }ã®å€¤ãŒ { children: ReactNode }ã§ã‚ã‚‹ã‹ã®ã‚ˆã†ã«è¦‹ãˆã‚‹ãŒ

ãƒ»æœ€åˆã¨äºŒç•ªç›®ã®ã€Œ:ã€ã¯ä½•ã‹ï¼Ÿ

ãƒ»å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯ãªã«ã‹ï¼Ÿ

ãƒ»ã“ã‚Œã‚’ä½¿ã£ã¦ã‚‹ã®ã¯TypeScriptã ã‹ã‚‰ã‹ï¼Ÿ
ã€€ä»–ã®ä¾‹æ–‡ã ã¨()ã®ä¸­ã¯{}ã¨ã„ã†ã‚‚ã®ãŒã‚ã£ãŸã€‚

ãƒ»ã“ã‚ŒãŒç†è§£ã§ããªã„å ´åˆã€ã‚‚ã†ã¡ã‚‡ã£ã¨ã‚ã‹ã‚Šã‚„ã™ã„æ›¸ãæ–¹ã§ããªã„ã‹ï¼Ÿ


---------------------------------------------

({ children }: { children: ReactNode }) ã®æ§‹æ–‡ã‚’æ®µéšçš„ã«åˆ†è§£ã—ãªãŒã‚‰ã€æ„å‘³ã‚’èª¬æ˜ã—ã¾ã™ã€‚

1. æœ€åˆã¨äºŒç•ªç›®ã®childrenã¯åˆ¥ç‰©ã‹ï¼Ÿ
ã¯ã„ã€åˆ¥ç‰©ã§ã™ã€‚ãŸã ã—ã€å†…å®¹çš„ã«é–¢ä¿‚ãŒã‚ã‚Šã¾ã™ã€‚

è©³ç´°:
æœ€åˆã®children:

é–¢æ•°ã®å¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚Œã‚‹ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ã€childrenãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’å–ã‚Šå‡ºã—ã¾ã™ï¼ˆåˆ†å‰²ä»£å…¥ï¼‰ã€‚
äºŒç•ªç›®ã®children:

ã“ã®childrenãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’ReactNodeã¨ã—ã¦æŒ‡å®šã—ã¦ã„ã¾ã™ï¼ˆå‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚
ã¤ã¾ã‚Šã€{ children }: { children: ReactNode } ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ†è§£ã§ãã¾ã™ï¼š

å¼•æ•°ã¯ã€Œchildrenã¨ã„ã†åå‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã§ã™ã€‚
childrenã®å‹ã¯ReactNodeã§ã™ã€‚
2. æœ€åˆã¨äºŒç•ªç›®ã®ã€Œ:ã€ã¯ä½•ã‹ï¼Ÿ
ãã‚Œãã‚Œä»¥ä¸‹ã®æ„å‘³ãŒã‚ã‚Šã¾ã™ã€‚

æœ€åˆã®::

åˆ†å‰²ä»£å…¥ã•ã‚ŒãŸchildrenã®å‹ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ã„ã¾ã™ã€‚
ã€Œ{ children }ã¯å‹{ children: ReactNode }ã¨ã—ã¦è§£é‡ˆã•ã‚Œã‚‹ã€ã¨ã„ã†æ„å‘³ã€‚
äºŒç•ªç›®ã®::

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£childrenã®å‹ãŒReactNodeã§ã‚ã‚‹ã“ã¨ã‚’æŒ‡å®šã—ã¾ã™ã€‚
ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode })
ã“ã‚Œã¯ã€Œé–¢æ•°ã®å¼•æ•°{ children }ãŒã€å‹{ children: ReactNode }ã«å¾“ã†ã“ã¨ã€ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚

3. å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯ä½•ã‹ï¼Ÿ
å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã¯ã€TypeScriptã§å¤‰æ•°ã‚„é–¢æ•°ã®å‹ã‚’æ˜ç¤ºçš„ã«æŒ‡å®šã™ã‚‹ã“ã¨ã§ã™ã€‚

å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã®ä¾‹:
å¤‰æ•°ã®å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const age: number = 30;
ageã¯å‹numberã§ã‚ã‚‹ã¨æ˜ç¤ºã—ã¦ã„ã¾ã™ã€‚
é–¢æ•°å¼•æ•°ã®å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const greet = (name: string): string => {
  return `Hello, ${name}`;
};
nameå¼•æ•°ã®å‹ã‚’stringã¨ã—ã¦æŒ‡å®šã€‚
é–¢æ•°ã®æˆ»ã‚Šå€¤ã®å‹ã‚‚stringã¨æ˜ç¤ºã€‚
4. TypeScriptã ã‹ã‚‰ã“ã®æ›¸ãæ–¹ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã‹ï¼Ÿ
ã¯ã„ã€TypeScriptç‰¹æœ‰ã®è¨˜è¿°ã§ã™ã€‚

JavaScriptã§ã¯å‹ã®æ¦‚å¿µãŒãªã„ãŸã‚ã€å˜ç´”ã«æ¬¡ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ï¼š

javascript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }) => {
  return <div>{children}</div>;
}
ä¸€æ–¹ã€TypeScriptã§ã¯å‹ã‚’å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã‚³ãƒ¼ãƒ‰ã®å®‰å…¨æ€§ã‚’é«˜ã‚ã¾ã™ã€‚ãã®ãŸã‚ã«æ¬¡ã®ã‚ˆã†ãªè¨˜è¿°ã‚’è¿½åŠ ã—ã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode }) => {
  return <div>{children}</div>;
}
5. {} ã®ã¿ã®å¼•æ•°ãŒã‚ã‚‹å ´åˆã¨ã®é•ã„
{} ã®ã¿ã‚’å¼•æ•°ã¨ã—ã¦æ¸¡ã—ã¦ã„ã‚‹å ´åˆã¯ã€åˆ†å‰²ä»£å…¥ã‚’ã—ã¦ã„ã¾ã›ã‚“ã€‚

ä¾‹:
javascript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
(props) => {
  return <div>{props.children}</div>;
}
ã“ã“ã§ã¯ã€propsã¨ã„ã†1ã¤ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€ãã®ä¸­ã‹ã‚‰props.childrenã‚’å‚ç…§ã—ã¾ã™ã€‚

ä¸€æ–¹ã€{ children }ã¯åˆ†å‰²ä»£å…¥ã‚’ä½¿ã„ã€ç›´æ¥childrenã‚’å–ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚

6. ã‚‚ã£ã¨ã‚ã‹ã‚Šã‚„ã™ã„æ›¸ãæ–¹
ã‚‚ã—ã“ã®æ§‹æ–‡ãŒè¤‡é›‘ã«æ„Ÿã˜ã‚‹å ´åˆã€åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãšã«æ›¸ãã“ã¨ã‚‚ã§ãã¾ã™ã€‚

å…ƒã®ã‚³ãƒ¼ãƒ‰:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode }) => {
  return <div>{children}</div>;
}
åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãªã„ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
(props: { children: ReactNode }) => {
  return <div>{props.children}</div>;
}
ã“ã®å ´åˆã€propsã¨ã„ã†ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å¼•æ•°ã¨ã—ã¦å—ã‘å–ã‚Šã€ãã“ã‹ã‚‰props.childrenã‚’å‚ç…§ã—ã¾ã™ã€‚

ã¾ã¨ã‚
æœ€åˆã¨äºŒç•ªç›®ã®children ã¯é–¢ä¿‚ãŒã‚ã‚‹ãŒåˆ¥ç‰©ã€‚
ã€Œ:ã€ ã¯å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã«ä½¿ã‚ã‚Œã‚‹ã€‚
åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãªã„è¨˜è¿°ã«ã™ã‚‹ ã¨ã‚ã‹ã‚Šã‚„ã™ã„å ´åˆãŒã‚ã‚‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
(props: { children: ReactNode }) => <div>{props.children}</div>;
TypeScriptç‰¹æœ‰ã®è¨˜è¿° ãªã®ã§ã€TypeScriptã‚’ä½¿ã‚ãªã„å ´åˆã¯å‹ã‚¢ãƒãƒ†ãƒ¼ã‚·ãƒ§ãƒ³ã¯ä¸è¦ã§ã™ã€‚







=========================================

({ children }: { children: ReactNode }) 
ã«ã—ã¦ã‚‚
(props: { children: ReactNode })
ã«ã—ã¦ã‚‚

: ãŒäºŒé‡ã«ä½¿ã‚ã‚Œã¦ç†è§£ãŒã§ããªã„ã€‚
ã‚‚ã†å°‘ã—ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã›ã‚ˆ


----------------------------------------------

({ children }: { children: ReactNode }) ã‚„ (props: { children: ReactNode }) ã«ãŠã‘ã‚‹ã€Œ:ã€ãŒäºŒé‡ã«ç™»å ´ã™ã‚‹ç†ç”±ã‚’ã€ã‚ã‹ã‚Šã‚„ã™ãæ®µéšçš„ã«èª¬æ˜ã—ã¾ã™ã€‚

1. æ§‹é€ ã®å…¨ä½“åƒã‚’ç¢ºèª
(props: { children: ReactNode }) ã®å ´åˆ
props ã¨ã„ã†åå‰ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€ãã®å‹ã‚’ã€Œ{ children: ReactNode }ã€ã¨ã—ã¦æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
(props: { children: ReactNode }) => { ... }
ã“ã‚Œã‚’æ—¥æœ¬èªã«ã™ã‚‹ã¨ï¼š

é–¢æ•°ã®å¼•æ•°ã¯ã€Œpropsã€ã€‚
ã€Œpropsã€ã®å‹ã¯ã€Œ{ children: ReactNode }ã€ã€‚
({ children }: { children: ReactNode }) ã®å ´åˆ
ã“ã‚Œã¯ä¸Šè¨˜ã®propsã®ä¾‹ã‚’ã€Œåˆ†å‰²ä»£å…¥ã€ã—ã¦æ›¸ãç›´ã—ãŸã‚‚ã®ã§ã™ã€‚
propsã‹ã‚‰ã€Œchildrenã€ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’å–ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode }) => { ... }
æ—¥æœ¬èªã«ã™ã‚‹ã¨ï¼š

é–¢æ•°ã®å¼•æ•°ã¯ã€Œchildrenã€ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€‚
ãã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã¯ã€Œ{ children: ReactNode }ã€ã€‚
2. ã€Œ:ã€ãŒäºŒé‡ã«ä½¿ã‚ã‚Œã‚‹ç†ç”±
ã“ã“ã§ã€Œ:ã€ãŒäºŒå›å‡ºã¦ãã‚‹ç†ç”±ã‚’æ•´ç†ã—ã¾ã™ã€‚

(1) å¤–å´ã®:
é–¢æ•°ã®å¼•æ•°å…¨ä½“ã®å‹ã‚’æŒ‡å®šã™ã‚‹ã‚‚ã®ã§ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
(props: { children: ReactNode }) => { ... }
ã“ã“ã§ã€Œ: { children: ReactNode }ã€ã¯ã€Œpropsã¨ã„ã†å¼•æ•°ã¯å‹{ children: ReactNode }ã‚’æŒã¤ã€ã¨ã„ã†æ„å‘³ã€‚
(2) å†…å´ã®:
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’æŒ‡å®šã™ã‚‹ã‚‚ã®ã§ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
{ children: ReactNode }
ã“ã“ã§ã€Œchildren: ReactNodeã€ã¯ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£childrenã®å‹ãŒReactNodeã§ã‚ã‚‹ã€ã¨ã„ã†æ„å‘³ã€‚
åˆ†å‰²ä»£å…¥ã§ã®æ§‹é€ 
æ¬¡ã«ã€åˆ†å‰²ä»£å…¥ã®æ§‹æ–‡ã«ç½®ãæ›ãˆã‚‹ã¨ã“ã†ãªã‚Šã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
({ children }: { children: ReactNode }) => { ... }
å¤–å´ã®: { children: ReactNode }:

é–¢æ•°å…¨ä½“ã®å¼•æ•°ãŒã€Œå‹{ children: ReactNode }ã€ã§ã‚ã‚‹ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
å†…å´ã®children: ReactNode:

ã€Œã“ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£childrenã®å‹ãŒReactNodeã§ã‚ã‚‹ã€ã“ã¨ã‚’ç¤ºã—ã¾ã™ã€‚
3. ã•ã‚‰ã«ç°¡å˜ãªä¾‹ã§ç†è§£
ã“ã“ã§ã€ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã‚’ä½¿ã£ã¦åŒã˜æ§‹é€ ã‚’ç¢ºèªã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

åˆ†å‰²ä»£å…¥ãªã—
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example = (props: { name: string }) => {
  console.log(props.name);
};
propså¼•æ•°ã‚’å—ã‘å–ã‚Šã€ãã®å‹ãŒ{ name: string }ã§ã‚ã‚‹ã¨æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆpropsã®ä¸­ã«ã¯ã€nameã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã€ãã®å‹ã¯stringã§ã™ã€‚
åˆ†å‰²ä»£å…¥ã‚ã‚Š
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example = ({ name }: { name: string }) => {
  console.log(name);
};
propså¼•æ•°ã‹ã‚‰nameãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã ã‘ã‚’å–ã‚Šå‡ºã—ã¦ã„ã¾ã™ã€‚
åˆ†å‰²ä»£å…¥ã—ãŸå¾Œã§ã‚‚ã€å…¨ä½“ã®å‹ï¼ˆ{ name: string }ï¼‰ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
4. ã•ã‚‰ã«èª­ã¿ã‚„ã™ã„æ›¸ãæ–¹ãŒã§ãã‚‹ã‹ï¼Ÿ
ã¯ã„ã€å°‘ã—åˆ†ã‹ã‚Šã‚„ã™ãã™ã‚‹ã“ã¨ã¯å¯èƒ½ã§ã™ã€‚ ãŸã ã—ã€TypeScriptã§ã¯å‹ã®è¨˜è¿°ãŒé¿ã‘ã‚‰ã‚Œãªã„ã®ã§ã€å¤šå°‘ã®ç†è§£ã¯å¿…è¦ã§ã™ã€‚

åˆ†å‰²ä»£å…¥ãªã—ã§æ›¸ã
ã¾ãšã€åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãªã„å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const GlobalStateProvider = (props: { children: ReactNode }) => {
  return <div>{props.children}</div>;
};
åˆ†å‰²ä»£å…¥ã‚’ä½¿ã†å ´åˆ
åˆ†å‰²ä»£å…¥ã‚’ä½¿ã†ã¨å°‘ã—çŸ­ããªã‚Šã¾ã™ãŒã€ä¸Šè¨˜ã‚ˆã‚Šè¤‡é›‘ã«æ„Ÿã˜ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  return <div>{children}</div>;
};
5. ã©ã¡ã‚‰ã‚’é¸ã¹ã°è‰¯ã„ã‹ï¼Ÿ
åˆå¿ƒè€…ã‚„å¯èª­æ€§é‡è¦–ã®å ´åˆ:

åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãšã«propsã§ã‚¢ã‚¯ã‚»ã‚¹ã™ã‚‹ã»ã†ãŒã‚ã‹ã‚Šã‚„ã™ã„ã§ã™ã€‚
ã‚³ãƒ¼ãƒ‰ã‚’çŸ­ãã—ãŸã„å ´åˆ:

åˆ†å‰²ä»£å…¥ã‚’ä½¿ã£ãŸæ–¹æ³•ãŒä¾¿åˆ©ã§ã™ãŒã€TypeScriptã®æ§‹æ–‡ã«æ…£ã‚Œã¦ã„ã‚‹å ´åˆã«é©ã—ã¦ã„ã¾ã™ã€‚
6. ã¾ã¨ã‚
æœ€åˆã¨äºŒç•ªç›®ã®childrenã¯åˆ¥ç‰©ã§ã€æœ€åˆã¯å¼•æ•°åã€äºŒç•ªç›®ã¯ãã®å‹ã€‚
å¤–å´ã®ã€Œ:ã€ã¯å¼•æ•°å…¨ä½“ã®å‹ã‚’å®šç¾©ã—ã€å†…å´ã®ã€Œ:ã€ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å‹ã‚’æŒ‡å®šã€‚
åˆ†å‰²ä»£å…¥ã‚’ä½¿ã‚ãšã€propsçµŒç”±ã§æ›¸ã‘ã°ç°¡å˜ã«ç†è§£ã§ãã‚‹ï¼š
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const GlobalStateProvider = (props: { children: ReactNode }) => {
  return <div>{props.children}</div>;
};





=========================================

å°‘ã—å‰ã«æ›¸ã„ã¦ã‚‚ã‚‰ã£ãŸ

// Contextã®ä½œæˆ
const CounterContext = createContext<{
  count: number;
  increment: () => void;
  decrement: () => void;
} | null>(null);

ã®æ„å‘³ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã®ã§æ•™ãˆã¦ã»ã—ã„ã€‚
ç‰¹ã«<>ãŒãªãœã‚ã‚‹ã®ã‹ã¨|ã¯ãªã‚“ãªã®ã‹ã€‚

----------------------------------------------

createContextã®å®šç¾©ã§ç™»å ´ã™ã‚‹ < > ã‚„ | ã«ã¤ã„ã¦ã€æ®µéšã‚’è¿½ã£ã¦èª¬æ˜ã—ã¾ã™ã€‚

1. createContext ã¨ã¯ä½•ã‹ï¼Ÿ
Reactã® createContext ã¯ã€ã‚¢ãƒ—ãƒªå…¨ä½“ã§å…±æœ‰ã™ã‚‹å€¤ï¼ˆçŠ¶æ…‹ã‚„é–¢æ•°ãªã©ï¼‰ã‚’ä¿æŒã™ã‚‹ãŸã‚ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‚’ä½œæˆã™ã‚‹é–¢æ•°ã§ã™ã€‚

ãŸã¨ãˆã°ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã®å€¤ï¼ˆcountï¼‰ã¨ã€ãã‚Œã‚’å¢—æ¸›ã•ã›ã‚‹é–¢æ•°ï¼ˆincrement ã¨ decrementï¼‰ã‚’å…±æœ‰ã—ãŸã„å ´åˆã« createContext ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

2. < > ã®æ„å‘³ï¼šã‚¸ã‚§ãƒãƒªãƒƒã‚¯ï¼ˆGenericsï¼‰
< > ã¯ ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ï¼ˆGenericsï¼‰ ã¨å‘¼ã°ã‚Œã‚‹TypeScriptã®æ§‹æ–‡ã§ã€ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã¨ã—ã¦æŒ‡å®šã™ã‚‹ã‚‚ã®ã§ã™ã€‚
ã“ã“ã§ã¯ã€createContext ãŒä¿æŒã™ã‚‹ãƒ‡ãƒ¼ã‚¿ã®å‹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚

ãªãœå¿…è¦ã‹ï¼Ÿ
createContext ã‚’å‘¼ã³å‡ºã™ã¨ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å€¤ã‚’ä¿æŒã™ã‚‹ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ãŒä½œã‚‰ã‚Œã¾ã™ã€‚
ã“ã®ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã®å‹ã‚’æŒ‡å®šã—ãªã„ã¨ã€TypeScriptã¯ã©ã‚“ãªå€¤ã§ã‚‚å—ã‘ä»˜ã‘ã‚‹ã¨è§£é‡ˆã—ã¦ã—ã¾ã†ãŸã‚ã€å‹ãƒã‚§ãƒƒã‚¯ãŒåŠ¹ã‹ãªããªã‚Šã¾ã™ã€‚
ä¾‹ï¼šå…·ä½“çš„ã«è¦‹ã¦ã¿ã‚‹
å‹ãªã—ï¼ˆè‰¯ããªã„ä¾‹ï¼‰
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const CounterContext = createContext(null);
createContext(null) ã¨ã ã‘æ›¸ãã¨ã€ã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒã©ã®ã‚ˆã†ãªå‹ã®å€¤ã‚’æŒã¤ã®ã‹TypeScriptã¯ã‚ã‹ã‚Šã¾ã›ã‚“ã€‚
å‹ãŒãªã„ã¨ã€æ„å›³ã—ãªã„å€¤ã‚„é–“é•ã£ãŸæ“ä½œãŒã§ãã¦ã—ã¾ã†ãƒªã‚¹ã‚¯ãŒã‚ã‚Šã¾ã™ã€‚
å‹ã‚ã‚Šï¼ˆè‰¯ã„ä¾‹ï¼‰
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const CounterContext = createContext<{
  count: number;
  increment: () => void;
  decrement: () => void;
} | null>(null);
< > ã®ä¸­ã«ã€ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒä¿æŒã™ã‚‹å€¤ã®å‹ã‚’æŒ‡å®šã—ã¦ã„ã¾ã™ã€‚
count: æ•°å€¤å‹ã®ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã€‚
increment ã¨ decrement: å¼•æ•°ãªã—ã§å‘¼ã³å‡ºã›ã‚‹é–¢æ•°ï¼ˆè¿”ã‚Šå€¤ã¯ä½•ã‚‚æŒ‡å®šã—ãªã„ã®ã§ voidï¼‰ã€‚
| null ã¯ã€Œã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒåˆæœŸçŠ¶æ…‹ã§ã¯ç©ºï¼ˆnullï¼‰ã§ã‚ã‚‹å ´åˆã€ã‚’è¨±å®¹ã™ã‚‹ã‚‚ã®ã§ã™ã€‚
3. | ã®æ„å‘³ï¼šãƒ¦ãƒ‹ã‚ªãƒ³å‹
TypeScriptã® | ã¯ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’è¡¨ã—ã¾ã™ã€‚
ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã¨ã¯ã€ã€Œã©ã¡ã‚‰ã‹ã®å‹ã€ã‚’å—ã‘å…¥ã‚Œã‚‹ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

ã“ã®ä¾‹ã®å ´åˆ
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
createContext<{
  count: number;
  increment: () => void;
  decrement: () => void;
} | null>(null);
ã“ã“ã§ | null ã®éƒ¨åˆ†ãŒãƒ¦ãƒ‹ã‚ªãƒ³å‹ã§ã™ã€‚
ã¤ã¾ã‚Šã€ã“ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å‹ã¯æ¬¡ã®ã„ãšã‚Œã‹ã§ã™ï¼š

{ count: number; increment: () => void; decrement: () => void; }
null
ãªãœ null ã‚’å«ã‚ã‚‹ã®ã‹ï¼Ÿ
Reactã§ã¯ã€createContext ã®åˆæœŸå€¤ã¨ã—ã¦ null ã‚’æŒ‡å®šã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

null ã‚’å«ã‚ãªã„å ´åˆã€å¿…ãšåˆæœŸå€¤ã‚’ç”¨æ„ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
åˆæœŸå€¤ã‚’ null ã«ã—ã¦ãŠã‘ã°ã€å¿…è¦ã«ãªã‚‹ã¾ã§å€¤ã‚’è¨­å®šã—ãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã›ã‚“ã€‚
4. å…¨ä½“ã®æ„å‘³
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const CounterContext = createContext<{
  count: number;
  increment: () => void;
  decrement: () => void;
} | null>(null);
è§£é‡ˆ
ã“ã® CounterContext ã¯ React Context ã§ã€ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼æƒ…å ±ã‚’ä¿æŒã—ã¾ã™ã€‚
å‹ã®æŒ‡å®šï¼š
ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã¯ä»¥ä¸‹ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ï¼š
countï¼ˆæ•°å€¤å‹ï¼‰
incrementï¼ˆæ•°å€¤ã‚’å¢—ã‚„ã™é–¢æ•°ï¼‰
decrementï¼ˆæ•°å€¤ã‚’æ¸›ã‚‰ã™é–¢æ•°ï¼‰
åˆæœŸå€¤ã¯ nullï¼š
åˆæœŸçŠ¶æ…‹ã§ã¯ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒç©ºï¼ˆnullï¼‰ã€‚
å¾Œã‹ã‚‰å€¤ã‚’è¨­å®šã™ã‚‹å ´åˆã«å‚™ãˆã¦ã„ã¾ã™ã€‚
5. ã‚ã‹ã‚Šã‚„ã™ã„å½¢ã«æ•´ç†ã™ã‚‹ã¨
å°‘ã—ãšã¤åˆ†è§£ã—ã¦è€ƒãˆã‚‹ã¨ã€ã“ã†ãªã‚Šã¾ã™ï¼š

1. ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã§ä¿æŒã—ãŸã„å‹ã‚’å®šç¾©
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type CounterType = {
  count: number;
  increment: () => void;
  decrement: () => void;
};
2. åˆæœŸå€¤ã¨ã—ã¦ null ã‚’è¨±å®¹ã™ã‚‹å‹ã‚’ä½œæˆ
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type CounterContextType = CounterType | null;
3. createContext ã§å‹ã‚’æŒ‡å®šã—ã¦åˆæœŸå€¤ã‚’è¨­å®š
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const CounterContext = createContext<CounterContextType>(null);
æ›¸ãæ›ãˆå¾Œ
ã“ã‚Œã§ç°¡æ½”ã‹ã¤ã‚ã‹ã‚Šã‚„ã™ããªã‚Šã¾ã—ãŸã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type CounterType = {
  count: number;
  increment: () => void;
  decrement: () => void;
};

const CounterContext = createContext<CounterType | null>(null);
6. ã¾ã¨ã‚
< > ã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ï¼šã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãŒä¿æŒã™ã‚‹å€¤ã®å‹ã‚’æŒ‡å®šã—ã¾ã™ã€‚
| ã¯ãƒ¦ãƒ‹ã‚ªãƒ³å‹ï¼šè¤‡æ•°ã®å‹ã‚’è¨±å®¹ã™ã‚‹ãŸã‚ã®æ§‹æ–‡ã§ã™ã€‚
åˆæœŸå€¤ã‚’ null ã«ã™ã‚‹ãŸã‚ã« | null ã‚’è¿½åŠ ã—ã¦ã„ã¾ã™ã€‚
å‹ã‚’åˆ¥é€”å®šç¾©ã™ã‚‹ã“ã¨ã§ã€ã•ã‚‰ã«èª­ã¿ã‚„ã™ãæ•´ç†ã§ãã¾ã™ã€‚
ä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã•ã‚‰ã«æ·±æ˜ã‚Šã—ã¦èª¬æ˜ã—ã¾ã™ï¼ ğŸ˜Š






=========================================

({ children }: { children: ReactNode })
ã®è©±ã«æˆ»ã‚‹ã€‚

ãƒ» { children: ReactNode } å‹ã¨ã„ã†ã®ãŒãªã‹ãªã‹ç†è§£ã§ããªã‹ã£ãŸã€‚
ã€€{}ã§å›²ã¾ã‚Œã¦ã‚‹ã®ã¯ãªãœã‹ï¼Ÿ

ãƒ»å‰ã®ä¾‹æ–‡ã§
const example = (props: { name: string }) => {
  console.log(props.name);
};
ã¨ã„ã†ã®ãŒã‚ã£ãŸã€‚
ã“ã‚Œã¯propsãŒ{ name: string }å‹ã§ã‚ã‚‹ã‚‰ã—ã„ãŒ
nameã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã£ãŸã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã¨ã„ã†ã“ã¨ã‹ï¼Ÿ

ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¤‡æ•°ã ã¨
const example = (props: { name: string, num: number }) => {
  console.log(props.name);
  console.log(props.num);
};
ã®ã‚ˆã†ã«ãªã‚‹ã®ã‹ï¼Ÿ




----------------------------------------------

è³ªå•ã«é †ã‚’è¿½ã£ã¦ç­”ãˆã¾ã™ï¼
1. { children: ReactNode } å‹ã«ã¤ã„ã¦
{} ã§å›²ã¾ã‚Œã¦ã„ã‚‹ç†ç”±
ã“ã‚Œã¯TypeScriptã§ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ ã‚’è¡¨ç¾ã—ã¦ã„ã¾ã™ã€‚
{ children: ReactNode } ã¯ã€ã€Œchildren ã¨ã„ã†åå‰ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€ã‚’æ„å‘³ã—ã¾ã™ã€‚

ä¾‹ãˆã°ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example: { name: string; age: number } = {
  name: "Alice",
  age: 25,
};
ã“ã®å ´åˆã€example ã¯ã€Œnameï¼ˆæ–‡å­—åˆ—å‹ï¼‰ã€ã¨ã€Œageï¼ˆæ•°å€¤å‹ï¼‰ã€ã¨ã„ã†2ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
åŒæ§˜ã«ã€{ children: ReactNode } ã§ã¯ã€

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã« children ã¨ã„ã†ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒã‚ã‚Šã€
ãã®å‹ãŒ ReactNode ã§ã‚ã‚‹ã€ã¨ã„ã†æ„å‘³ã«ãªã‚Šã¾ã™ã€‚
2. ReactNode ã¨ã¯ä½•ã‹ï¼Ÿ
ReactNode ã¯ã€Reactã§ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°å¯èƒ½ãªè¦ç´ ã®å‹ã‚’è¡¨ã—ã¾ã™ã€‚

æ–‡å­—åˆ—ï¼ˆ"Hello"ï¼‰
æ•°å€¤ï¼ˆ42ï¼‰
JSXè¦ç´ ï¼ˆ<div>Hello</div>ï¼‰
é…åˆ—ï¼ˆ["Hello", <div>World</div>]ï¼‰
null ã‚„ undefined
ãªã©ãŒå«ã¾ã‚Œã¾ã™ã€‚

ã¤ã¾ã‚Šã€Reactã®ä¸­ã§å­è¦ç´ ã¨ã—ã¦è¡¨ç¤ºã§ãã‚‹ã‚‚ã®ã™ã¹ã¦ãŒ ReactNode ã«è©²å½“ã—ã¾ã™ã€‚

3. ä¾‹ï¼š{ children: ReactNode } ã‚’æŒã¤é–¢æ•°
ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã¯ã€props.children ã« ReactNode å‹ã®å­è¦ç´ ã‚’æ¸¡ã›ã‚‹ã“ã¨ã‚’ç¤ºã—ã¦ã„ã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const Example = ({ children }: { children: ReactNode }) => {
  return <div>{children}</div>;
};
ä½¿ç”¨ä¾‹ï¼š

tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
<Example>
  <p>Hello, World!</p>
</Example>
ã“ã“ã§ã€<p>Hello, World!</p> ãŒ children ã¨ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚
ReactNode ã®å‹ã«é©åˆã—ã¦ã„ã‚‹ã®ã§ã‚¨ãƒ©ãƒ¼ã¯èµ·ãã¾ã›ã‚“ã€‚

4. props ã®å‹ã«ã¤ã„ã¦
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒ1ã¤ã®å ´åˆ
ä¾‹ãˆã°ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example = (props: { name: string }) => {
  console.log(props.name);
};
props ã¯ã€1ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ name ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚Šã€ãã®å‹ã¯æ–‡å­—åˆ—ï¼ˆstringï¼‰ã§ã™ã€‚
ä½¿ç”¨ä¾‹ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
example({ name: "Alice" }); // "Alice" ã¨å‡ºåŠ›
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¤‡æ•°ã®å ´åˆ
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example = (props: { name: string; num: number }) => {
  console.log(props.name);
  console.log(props.num);
};
props ã¯ã€nameï¼ˆæ–‡å­—åˆ—ï¼‰ã¨ numï¼ˆæ•°å€¤ï¼‰ã¨ã„ã†2ã¤ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã™ã€‚
ä½¿ç”¨ä¾‹ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
example({ name: "Alice", num: 42 });
// "Alice" ã¨ "42" ãŒå‡ºåŠ›ã•ã‚Œã¾ã™
children ã‚’å«ã‚€ä¾‹
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example = (props: { name: string; children: ReactNode }) => {
  console.log(props.name);
  return <div>{props.children}</div>;
};
ä½¿ç”¨ä¾‹ï¼š

tsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
example({ name: "Alice", children: <p>Hello, World!</p> });
ã“ã“ã§ã¯ children ãŒ JSX è¦ç´ ï¼ˆ<p>Hello, World!</p>ï¼‰ã¨ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚

5. è³ªå•ã®ã¾ã¨ã‚ã¨å›ç­”
Q1. { children: ReactNode } å‹ã§ {} ã§å›²ã¾ã‚Œã¦ã„ã‚‹ã®ã¯ãªãœã‹ï¼Ÿ
{} ã¯ ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
Reactã§ã¯ã€ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã® props ã¯é€šå¸¸ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§å—ã‘å–ã‚‹ã®ã§ã€ã“ã®å½¢ã«ãªã‚Šã¾ã™ã€‚
Q2. props: { name: string } ã®è§£é‡ˆã¯ï¼Ÿ
ã“ã‚Œã¯ã€Œprops ãŒ name ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ï¼ˆå‹ã¯ stringï¼‰ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã€ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
Q3. è¤‡æ•°ã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã©ã†ãªã‚‹ï¼Ÿ
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãŒè¤‡æ•°ã®å ´åˆã¯ã€{ name: string, num: number } ã®ã‚ˆã†ã«è¨˜è¿°ã—ã¾ã™ã€‚
Q4. æ›¸ãæ–¹ã‚’ã‚‚ã£ã¨ç°¡å˜ã«ã§ãã‚‹ã‹ï¼Ÿ
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã‚’åˆ¥ã®åå‰ã¨ã—ã¦å®šç¾©ã™ã‚‹ã¨ã€è¦‹ã‚„ã™ããªã‚Šã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Props = {
  name: string;
  num: number;
};

const example = (props: Props) => {
  console.log(props.name);
  console.log(props.num);
};
åŒã˜è€ƒãˆã§ã€children ã‚’å«ã‚€å‹ã‚‚æ¬¡ã®ã‚ˆã†ã«ç°¡ç•¥åŒ–ã§ãã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Props = {
  children: ReactNode;
};

const Example = ({ children }: Props) => {
  return <div>{children}</div>;
};
ä¸æ˜ç‚¹ãŒã‚ã‚Œã°ã•ã‚‰ã«è©³ã—ãèª¬æ˜ã—ã¾ã™ï¼ ğŸ˜Š


=========================================
ä¾‹æ–‡ã§ã¯
{ name: string; num: number }
ã¨ã‚ã‚Š
å›ç­”ã§ã¯
{ name: string, num: number }
ã¨ã‚ã£ãŸãŒã€åŒºåˆ‡ã‚Šã¯ ; ã§ã‚‚ , ã§ã‚‚ã©ã£ã¡ã§ã‚‚ã„ã„ã®ã‹ï¼Ÿ
æœ€å¾Œã¯ ; ã‚„, ãŒã‚ã£ã¦ã‚‚ãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚‰ãªã„ã‹ï¼Ÿ

----------------------------------------------

çµè«–
TypeScriptã§ã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åŒºåˆ‡ã‚Šã¯ ; ã§ã‚‚ , ã§ã‚‚ã©ã¡ã‚‰ã§ã‚‚OK ã§ã™ã€‚
æœ€å¾Œã«åŒºåˆ‡ã‚Šè¨˜å·ï¼ˆ, ã¾ãŸã¯ ;ï¼‰ãŒãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚
è©³ç´°ãªèª¬æ˜
åŒºåˆ‡ã‚Šã®æ›¸ãæ–¹
TypeScriptã§ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã‚’å®šç¾©ã™ã‚‹éš›ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åŒºåˆ‡ã‚Šã¯ ã‚»ãƒŸã‚³ãƒ­ãƒ³ (;) ã‹ ã‚«ãƒ³ãƒ (,) ã®ã©ã¡ã‚‰ã‹ã‚’ä½¿ãˆã¾ã™ã€‚

ä¾‹: ä»¥ä¸‹ã¯ã©ã¡ã‚‰ã‚‚åŒã˜æ„å‘³ã§ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type PropsA = {
  name: string;
  age: number;
};

type PropsB = {
  name: string,
  age: number,
};
ã‚»ãƒŸã‚³ãƒ­ãƒ³ (;)ï¼šå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„å¤šãã®TypeScriptã‚³ãƒ¼ãƒ‰ã§ä¸€èˆ¬çš„ã«ä½¿ã‚ã‚Œã‚‹ã€‚
ã‚«ãƒ³ãƒ (,)ï¼šJavaScriptã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆè¨˜æ³•ã«ä¼¼ã¦ã„ã‚‹ã®ã§ã€èª­ã¿ã‚„ã™ã„ã¨æ„Ÿã˜ã‚‹äººã‚‚ã„ã‚‹ã€‚
ã©ã¡ã‚‰ã‚’ä½¿ã†ã‹ã¯ ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚„ãƒãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ« ã«ã‚ˆã‚Šã¾ã™ã€‚

æœ€å¾Œã®åŒºåˆ‡ã‚Šè¨˜å·
æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾Œã«åŒºåˆ‡ã‚Šè¨˜å·ã‚’ä»˜ã‘ã¦ã‚‚ã€ä»˜ã‘ãªãã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚
ã“ã‚Œã¯TypeScriptãŒã€Œæœ€å¾Œã®åŒºåˆ‡ã‚Šè¨˜å·ã‚’ç„¡è¦–ã™ã‚‹ã€ã¨ã„ã†ä»•æ§˜ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã§ã™ã€‚

ä¾‹: ä»¥ä¸‹ã‚‚ã™ã¹ã¦åŒã˜æ„å‘³ã§ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type PropsC = {
  name: string;
  age: number
};

type PropsD = {
  name: string;
  age: number;
};

type PropsE = {
  name: string,
  age: number,
};
æ¨å¥¨ã•ã‚Œã‚‹ã‚¹ã‚¿ã‚¤ãƒ«

æœ€å¾Œã«åŒºåˆ‡ã‚Šè¨˜å·ã‚’ä»˜ã‘ã‚‹ï¼ˆãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã€ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚»ãƒŸã‚³ãƒ­ãƒ³ï¼‰
ä»˜ã‘ãŸã»ã†ãŒ ã‚³ãƒ¼ãƒ‰ã®ä¿®æ­£ã‚„æ‹¡å¼µæ™‚ã«å·®åˆ†ãŒå°‘ãªããªã‚Šã€ç®¡ç†ãŒæ¥½ ã ã‹ã‚‰ã§ã™ã€‚
ç‰¹ã«ã‚«ãƒ³ãƒã¯å¤šãã®JavaScript/TypeScriptã®ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã§æ¨å¥¨ã•ã‚Œã¦ã„ã¾ã™ã€‚
ä¾‹:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Props = {
  name: string,
  age: number, // ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒ
};
ã‚¨ãƒ©ãƒ¼ãŒå‡ºãªã„ç†ç”±
TypeScriptã®å‹å®šç¾©ã¯ã€Œæ§‹æ–‡ã‚’æŸ”è»Ÿã«å—ã‘å…¥ã‚Œã‚‹ã€ä»•æ§˜ã«ãªã£ã¦ã„ã¾ã™ã€‚ãã®ãŸã‚ã€

åŒºåˆ‡ã‚Šã‚’ã‚»ãƒŸã‚³ãƒ­ãƒ³ã‹ã‚«ãƒ³ãƒã§çµ±ä¸€ã—ã¦ã„ãªãã¦ã‚‚OKã€‚
æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾Œã«åŒºåˆ‡ã‚Šè¨˜å·ãŒãªãã¦ã‚‚OKã€‚
ãŸã ã—ã€çµ±ä¸€ã•ã‚Œã¦ã„ãªã„ã¨ã‚³ãƒ¼ãƒ‰ãŒèª­ã¿ã«ãããªã‚‹ãŸã‚ã€1ã¤ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’çµ±ä¸€ã—ã¦ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

ãŠã™ã™ã‚ã‚¹ã‚¿ã‚¤ãƒ«
ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®åŒºåˆ‡ã‚Šã«ã¯ã‚«ãƒ³ãƒ (,) ã‚’ä½¿ã†ã€‚
æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾Œã«ã¯ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚’ä»˜ã‘ã‚‹ã€‚
ä¾‹:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Props = {
  name: string,
  age: number,
};
ã“ã®ã‚¹ã‚¿ã‚¤ãƒ«ã¯JavaScriptã§ã‚‚ä¸€èˆ¬çš„ã§ã€ESLintã‚„Prettierã®è¨­å®šã«ã‚‚é©ã—ã¦ã„ã¾ã™ã€‚


=========================================
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã£ã¦ãªã«ï¼Ÿ

----------------------------------------------


ChatGPT:
ChatGPT
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒï¼ˆTrailing Commaï¼‰ ã¨ã¯ã€ãƒªã‚¹ãƒˆã‚„ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã€é…åˆ—ãªã©ã®æœ€å¾Œã®é …ç›®ã®å¾Œã«ä»˜ã‘ã‚‹ã‚«ãƒ³ãƒï¼ˆ,ï¼‰ã®ã“ã¨ã§ã™ã€‚æ—¥æœ¬èªã§ã¯ã€Œæœ«å°¾ã®ã‚«ãƒ³ãƒã€ã¨ã‚‚å‘¼ã°ã‚Œã¾ã™ã€‚

ä¾‹: ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã®ã‚ã‚‹ã‚³ãƒ¼ãƒ‰
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const exampleArray = [
  1,
  2,
  3, // æœ€å¾Œã®è¦ç´ ã®å¾Œã«ã‚«ãƒ³ãƒãŒã‚ã‚‹
];

const exampleObject = {
  name: "Alice",
  age: 25,
};
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã®ãªã„ã‚³ãƒ¼ãƒ‰
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const exampleArray = [
  1,
  2,
  3 // æœ€å¾Œã®è¦ç´ ã®å¾Œã«ã‚«ãƒ³ãƒãŒãªã„
];

const exampleObject = {
  name: "Alice",
  age: 25 // æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾Œã«ã‚«ãƒ³ãƒãŒãªã„
};
ãªãœãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚’ä½¿ã†ã®ã‹ï¼Ÿ
1. å·®åˆ†ï¼ˆå¤‰æ›´å±¥æ­´ï¼‰ã‚’ã‚ã‹ã‚Šã‚„ã™ãã™ã‚‹
æ–°ã—ã„é …ç›®ã‚’è¿½åŠ ã™ã‚‹éš›ã€æœ€å¾Œã®è¡Œã«å¤‰æ›´ãŒç™ºç”Ÿã—ãªã„ãŸã‚ã€å¤‰æ›´ç®‡æ‰€ãŒæ˜ç¢ºã«ãªã‚Šã¾ã™ã€‚

ä¾‹: ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚ã‚Šã®å ´åˆ

diff
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const exampleArray = [
  1,
  2,
  3, // ã“ã®è¡Œã«å¤‰æ›´ãªã—
+ 4, // ã“ã®è¡Œã ã‘ãŒè¿½åŠ ã•ã‚ŒãŸã“ã¨ãŒã‚ã‹ã‚‹
];
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒãªã—ã®å ´åˆ

diff
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const exampleArray = [
  1,
  2,
- 3
+ 3,
+ 4
];
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒãŒãªã„å ´åˆã€æœ€å¾Œã®è¦ç´ ã«ã‚‚å¤‰æ›´ãŒç™ºç”Ÿã—ãŸã‚ˆã†ã«è¦‹ãˆã¦ã—ã¾ã„ã¾ã™ã€‚

2. ã‚³ãƒ¼ãƒ‰ã®æ›¸ãæ›ãˆãŒæ¥½
é …ç›®ã‚’è¿½åŠ ã™ã‚‹ã¨ãã«ã€Œã‚«ãƒ³ãƒã‚’ä»˜ã‘å¿˜ã‚Œã‚‹ã€ã¨ã„ã†ãƒŸã‚¹ã‚’é˜²ã’ã‚‹ã€‚
é …ç›®ã‚’ä¸¦ã¹æ›¿ãˆãŸã‚Šå‰Šé™¤ã™ã‚‹éš›ã«ã‚‚ã‚¨ãƒ©ãƒ¼ãŒèµ·ãã«ãã„ã€‚
3. ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã§æ¨å¥¨ã•ã‚Œã‚‹
å¤šãã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚¬ã‚¤ãƒ‰ã‚„ãƒ•ã‚©ãƒ¼ãƒãƒƒã‚¿ï¼ˆESLint, Prettierãªã©ï¼‰ã§ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚’æ¨å¥¨ã—ã¦ã„ã¾ã™ã€‚

ã©ã“ã§ä½¿ã†ã®ã‹ï¼Ÿ
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã¯ä»¥ä¸‹ã®å ´æ‰€ã§ä½¿ãˆã¾ã™ï¼š

é…åˆ—

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const arr = [
  1,
  2,
  3, // ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒ
];
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const obj = {
  key1: "value1",
  key2: "value2",
};
é–¢æ•°ã®å¼•æ•°ãƒªã‚¹ãƒˆï¼ˆES2017ä»¥é™ã®JavaScriptã§å¯¾å¿œï¼‰

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
function example(
  param1,
  param2,
) {
  console.log(param1, param2);
}
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚’ä½¿ã†ã¹ãã‹ï¼Ÿ
åŸºæœ¬çš„ã«ã¯ä½¿ã†ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ä»¥ä¸‹ã®ç†ç”±ã‹ã‚‰ã€ã‚³ãƒ¼ãƒ‰ã®ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ãŒæ¥½ã«ãªã‚Šã€ãƒãƒ¼ãƒ ã§ã®é–‹ç™ºã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã«ãªã‚Šã¾ã™ï¼š

Prettier ã‚„ ESLint ã®è¨­å®šã«æ²¿ã†ã€‚
å·®åˆ†ãŒã‚ã‹ã‚Šã‚„ã™ã„ã€‚
ã‚³ãƒ¼ãƒ‰ã®ä¿å®ˆæ€§ãŒå‘ä¸Šã™ã‚‹ã€‚
ãŸã ã—ã€æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã§ä½¿ã‚ã‚Œã¦ã„ãªã„å ´åˆã¯ãƒãƒ¼ãƒ ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã¾ã—ã‚‡ã†ã€‚


=========================================
å…ˆç¨‹èã„ãŸ

ä¾‹æ–‡ã§ã¯
{ name: string; num: number }
ã¨ã‚ã‚Š
å›ç­”ã§ã¯
{ name: string, num: number }
ã¨ã‚ã£ãŸãŒã€åŒºåˆ‡ã‚Šã¯ ; ã§ã‚‚ , ã§ã‚‚ã©ã£ã¡ã§ã‚‚ã„ã„ã®ã‹ï¼Ÿ
æœ€å¾Œã¯ ; ã‚„, ãŒã‚ã£ã¦ã‚‚ãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚‰ãªã„ã‹ï¼Ÿ

ã¯ã€TypeScripã ã‘ã§ãªãã€
ãŸã ã®JavaScriptã€ãŸã ã®Reactã€ãã‚Œãã‚Œã§ã‚‚å½“ã¦ã¯ã¾ã‚‹ã®ã‹ï¼Ÿ

----------------------------------------------

TypeScriptã®å ´åˆ
TypeScriptã§ã¯ã€å‹å®šç¾©ã®åŒºåˆ‡ã‚Šè¨˜å·ã¨ã—ã¦ ; ã¨ , ã®ã©ã¡ã‚‰ã§ã‚‚ä½¿ç”¨å¯èƒ½ã§ã™ã€‚

ä¾‹
ä»¥ä¸‹ã¯ã©ã¡ã‚‰ã‚‚æœ‰åŠ¹ãªå‹å®šç¾©ã§ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Example1 = { name: string; num: number }; // ã‚»ãƒŸã‚³ãƒ­ãƒ³
type Example2 = { name: string, num: number }; // ã‚«ãƒ³ãƒ
ãƒã‚¤ãƒ³ãƒˆ:

TypeScriptã®å‹å®šç¾©ã§ã¯ã€ã‚»ãƒŸã‚³ãƒ­ãƒ³ ; ãŒä¸€èˆ¬çš„ã«ä½¿ã‚ã‚Œã¾ã™ãŒã€ã‚«ãƒ³ãƒ , ã‚’ä½¿ã£ã¦ã‚‚å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚
æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã«åŒºåˆ‡ã‚Šè¨˜å·ã‚’ä»˜ã‘ã¦ã‚‚ã€ä»˜ã‘ãªãã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Example3 = { name: string, num: number, }; // ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚ã‚Š
type Example4 = { name: string, num: number };  // ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒãªã—
JavaScriptã®å ´åˆ
JavaScriptã®é€šå¸¸ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãƒªãƒ†ãƒ©ãƒ«ã§ã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£é–“ã®åŒºåˆ‡ã‚Šã¯å¿…ãš ã‚«ãƒ³ãƒ , ã‚’ä½¿ã„ã¾ã™ã€‚

ä¾‹
javascript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example1 = { name: "Alice", num: 42 }; // æœ‰åŠ¹
const example2 = { name: "Alice"; num: 42 }; // ã‚¨ãƒ©ãƒ¼: ã‚»ãƒŸã‚³ãƒ­ãƒ³ã¯ç„¡åŠ¹
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒ:
JavaScriptã§ã¯ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒãŒè¨±å®¹ã•ã‚Œã¾ã™ï¼ˆç‰¹ã«ES5ä»¥é™ï¼‰ã€‚
æœ€å¾Œã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®å¾Œã«ã‚«ãƒ³ãƒã‚’ä»˜ã‘ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ã¯ãªã‚Šã¾ã›ã‚“ã€‚
javascript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const example3 = { name: "Alice", num: 42, }; // æœ‰åŠ¹
const example4 = { name: "Alice", num: 42 };  // æœ‰åŠ¹
Reactã®å ´åˆ
Reactã§ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚„JSXè¨˜è¿°ã¯ã€åŸºæœ¬çš„ã«JavaScriptã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã„ã¾ã™ã€‚

JavaScriptã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’æ¸¡ã™ä¾‹
jsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const props = { name: "Alice", num: 42 }; // ã‚«ãƒ³ãƒã§åŒºåˆ‡ã‚‹
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒ
ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã¯Reactã§ã‚‚è¨±å®¹ã•ã‚Œã¾ã™ã€‚

jsx
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const props = { name: "Alice", num: 42, }; // ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒã‚ã‚Šã§ã‚‚æœ‰åŠ¹
çµè«–: å„è¨€èªã§ã®æŒ™å‹•
è¨€èª	; ã‚»ãƒŸã‚³ãƒ­ãƒ³	, ã‚«ãƒ³ãƒ	ãƒˆãƒ¬ã‚¤ãƒªãƒ³ã‚°ã‚«ãƒ³ãƒ
TypeScript	æœ‰åŠ¹	æœ‰åŠ¹	è¨±å®¹ã•ã‚Œã‚‹
JavaScript	ç„¡åŠ¹ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰	æœ‰åŠ¹	è¨±å®¹ã•ã‚Œã‚‹
React (JSX)	ç„¡åŠ¹ï¼ˆã‚¨ãƒ©ãƒ¼ï¼‰	æœ‰åŠ¹	è¨±å®¹ã•ã‚Œã‚‹
TypeScriptã®å‹å®šç¾©ã§ã¯ ; ã‚‚ä½¿ãˆã¾ã™ãŒã€JavaScriptã‚„Reactã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã¯å¸¸ã« ã‚«ãƒ³ãƒ ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚









=========================================
ä»¥å‰å‡ºåŠ›ã—ã¦ã‚‚ã‚‰ã£ãŸcontextã®ã‚³ãƒ¼ãƒ‰ã§

// src/app/context/GlobalStateContext.tsx
"use client";

import { createContext, useContext, useState, ReactNode } from "react";

const GlobalStateContext = createContext(null);

export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  const [sharedState, setSharedState] = useState("å…±æœ‰ã•ã‚Œã‚‹å€¤");

  return (
    <GlobalStateContext.Provider value={{ sharedState, setSharedState }}>
      {children}
    </GlobalStateContext.Provider>
  );
};

export const useGlobalState = () => {
  const context = useContext(GlobalStateContext);
  if (!context) {
    throw new Error("useGlobalState must be used within GlobalStateProvider");
  }
  return context;
};

ã¨æ›¸ã„ãŸã‚‰ä»¥ä¸‹ã®ã‚¨ãƒ©ãƒ¼ãŒå‡ºãŸã€‚
ã©ã†ã™ã‚Œã°ã„ã„ã‹ï¼Ÿ


å‹ '{ sharedState: string; setSharedState: Dispatch<SetStateAction<string>>; }' ã‚’å‹ 'null' ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚ts(2322)
index.d.ts(609, 9): äºˆæœŸã•ã‚ŒãŸå‹ã¯ã€å‹ 'IntrinsicAttributes & ProviderProps<null>' ã«å¯¾ã—ã¦ã“ã“ã§å®£è¨€ã•ã‚ŒãŸãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ 'value' ã‹ã‚‰å–å¾—ã•ã‚Œã¦ã„ã¾ã™
(property) ProviderProps<null>.value: null


----------------------------------------------

ã‚¨ãƒ©ãƒ¼ã®åŸå› ã¯ã€createContext ã®åˆæœŸå€¤ã¨ã—ã¦ null ã‚’è¨­å®šã—ã¦ã„ã‚‹ã«ã‚‚é–¢ã‚ã‚‰ãšã€<GlobalStateContext.Provider> ã«æ¸¡ã—ã¦ã„ã‚‹ value ãŒ null ã§ã¯ãªãã€ { sharedState, setSharedState } ã®ã‚ˆã†ãªã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã“ã¨ã§ã™ã€‚

ã“ã®å•é¡Œã‚’è§£æ±ºã™ã‚‹ã«ã¯ã€createContext ã®åˆæœŸå€¤ã¨ãã®å‹ã‚’é©åˆ‡ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ä¿®æ­£ã‚³ãƒ¼ãƒ‰ä¾‹
ä»¥ä¸‹ã®ã‚ˆã†ã« createContext ã®åˆæœŸå€¤ã«æ­£ã—ã„å‹ã‚’è¨­å®šã—ã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
"use client";

import { createContext, useContext, useState, ReactNode, Dispatch, SetStateAction } from "react";

// ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å‹ã‚’å®šç¾©
type GlobalStateContextType = {
  sharedState: string;
  setSharedState: Dispatch<SetStateAction<string>>;
} | null;

// Contextã®ä½œæˆï¼ˆå‹ã‚’æŒ‡å®šï¼‰
const GlobalStateContext = createContext<GlobalStateContextType>(null);

export const GlobalStateProvider = ({ children }: { children: ReactNode }) => {
  const [sharedState, setSharedState] = useState("å…±æœ‰ã•ã‚Œã‚‹å€¤");

  return (
    <GlobalStateContext.Provider value={{ sharedState, setSharedState }}>
      {children}
    </GlobalStateContext.Provider>
  );
};

export const useGlobalState = () => {
  const context = useContext(GlobalStateContext);
  if (!context) {
    throw new Error("useGlobalState must be used within GlobalStateProvider");
  }
  return context;
};
ä¿®æ­£ãƒã‚¤ãƒ³ãƒˆ
createContext ã®åˆæœŸå€¤ã‚’å‹ã§æ˜ç¤º

createContext<GlobalStateContextType>(null) ã®ã‚ˆã†ã«å‹ã‚’æŒ‡å®šã€‚
åˆæœŸå€¤ã¨ã—ã¦ null ã‚’è¨­å®šã™ã‚‹å ´åˆã€null ã‚’è¨±å®¹ã™ã‚‹å‹ã‚’æ˜ç¤ºçš„ã«è¨­å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã®å‹ GlobalStateContextType ã‚’å®šç¾©

sharedState ã¯æ–‡å­—åˆ—å‹ stringã€‚
setSharedState ã¯ Dispatch<SetStateAction<string>> å‹ã€‚
åˆæœŸå€¤ã¨ã—ã¦ null ã‚’è¨±å®¹ã™ã‚‹ãŸã‚ã« | null ã‚’è¿½åŠ ã€‚
è£œè¶³
ã‚‚ã—åˆæœŸå€¤ã¨ã—ã¦ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®å€¤ã‚’è¨­å®šã—ãŸã„å ´åˆã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ã«æ›¸ã‘ã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const GlobalStateContext = createContext<GlobalStateContextType>({
  sharedState: "ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤",
  setSharedState: () => {}, // ç©ºã®é–¢æ•°ã‚’è¨­å®š
});
ãŸã ã—ã€null ã‚’ä½¿ç”¨ã™ã‚‹æ–¹ãŒã€ãƒ—ãƒ­ãƒã‚¤ãƒ€ãƒ¼ãŒå­˜åœ¨ã—ãªã„å ´åˆã«ã‚¨ãƒ©ãƒ¼ã‚’ç™ºç”Ÿã•ã›ã‚„ã™ãã€ã‚ˆã‚Šå®‰å…¨ã§ã™ã€‚


=========================================

Dispatch ã«ã¤ã„ã¦ã®çŸ¥è­˜ãŒãªã„ã®ã§
setSharedState: Dispatch<SetStateAction<string>>;
ã®ã¨ã“ã‚ãŒã‚ã‹ã‚‰ãªã„ã€‚
Dispatch ã®èª¬æ˜ã‚’ã—ã¦ã€‚

----------------------------------------------

Dispatch ã¯ã€React ã®å‹å®šç¾©ã®ä¸­ã§ä½¿ã‚ã‚Œã‚‹ã‚‚ã®ã§ã€çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã®å‹ã‚’è¡¨ã—ã¾ã™ã€‚

React ã® useState ã‚’ä½¿ã£ãŸã¨ãã«å¾—ã‚‰ã‚Œã‚‹ setState é–¢æ•°ï¼ˆä¾‹: setSharedStateï¼‰ã®å‹ã‚’æ˜ç¤ºçš„ã«è¨˜è¿°ã—ãŸã„å ´åˆã«ä½¿ç”¨ã—ã¾ã™ã€‚

Dispatch ã®å½¹å‰²
Dispatch ã¯ React ãŒå†…éƒ¨ã§æä¾›ã—ã¦ã„ã‚‹å‹ã§ã€ç‰¹å®šã®å‹ã®å€¤ã‚’å—ã‘å–ã‚‹é–¢æ•°ã‚’è¡¨ã—ã¾ã™ã€‚

å…·ä½“çš„ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Dispatch<A> = (value: A) => void;
Dispatch<A> ã¯ã€ã€Œå¼•æ•°ã« A å‹ã®å€¤ã‚’å–ã‚Šã€ä½•ã‚‚è¿”ã•ãªã„ï¼ˆvoidï¼‰ã€ã¨ã„ã†é–¢æ•°ã®å‹ã€‚
A ã¯ã‚¸ã‚§ãƒãƒªãƒƒã‚¯å‹ã§ã€Dispatch ã«æ¸¡ã™å…·ä½“çš„ãªå‹ï¼ˆä¾‹: string ã‚„ numberï¼‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚
SetStateAction ã®å½¹å‰²
SetStateAction ã¯ã€useState ã® setState é–¢æ•°ã§ä½¿ã‚ã‚Œã‚‹å‹ã‚’è¡¨ã—ã¾ã™ã€‚

å®šç¾©ã¯ä»¥ä¸‹ã®é€šã‚Š:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type SetStateAction<S> = S | ((prevState: S) => S);
S ã¯çŠ¶æ…‹ã®å‹ã§ã™ï¼ˆä¾‹: string, number ãªã©ï¼‰ã€‚
SetStateAction<S> ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã‚’å—ã‘å–ã‚Šã¾ã™:
çŠ¶æ…‹ã®æ–°ã—ã„å€¤ï¼ˆä¾‹: "æ–°ã—ã„å€¤"ï¼‰ã€‚
å‰ã®çŠ¶æ…‹ã‚’å¼•æ•°ã«å–ã‚Šã€æ¬¡ã®çŠ¶æ…‹ã‚’è¿”ã™é–¢æ•°ï¼ˆä¾‹: (prevState) => prevState + 1ï¼‰ã€‚
Dispatch<SetStateAction<string>> ã®æ„å‘³
Dispatch<SetStateAction<string>> ã¯ã€useState ã§ä½¿ã† setState é–¢æ•°ã¨åŒã˜å‹ã‚’æŒã¤ã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚

å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªé–¢æ•°ã§ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type setState = (action: SetStateAction<string>) => void;
ã“ã®é–¢æ•°ã¯æ¬¡ã®ã‚ˆã†ã«å‹•ä½œã—ã¾ã™:

æ–°ã—ã„å€¤ã‚’ç›´æ¥æ¸¡ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setSharedState("æ–°ã—ã„å€¤");
çŠ¶æ…‹ã¯ "æ–°ã—ã„å€¤" ã«æ›´æ–°ã•ã‚Œã¾ã™ã€‚

å‰ã®å€¤ã‚’åŸºã«æ–°ã—ã„å€¤ã‚’æ±ºå®šã™ã‚‹é–¢æ•°ã‚’æ¸¡ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setSharedState((prevState) => prevState + "è¿½åŠ ");
ç¾åœ¨ã®çŠ¶æ…‹ãŒ "ç¾åœ¨ã®å€¤" ã§ã‚ã‚Œã°ã€æ›´æ–°å¾Œã®çŠ¶æ…‹ã¯ "ç¾åœ¨ã®å€¤è¿½åŠ " ã«ãªã‚Šã¾ã™ã€‚

å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‰ä¾‹
ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹ç®¡ç†ã«ãŠã„ã¦ã€Dispatch<SetStateAction<string>> ã‚’åˆ©ç”¨ã—ã¾ã™ã€‚

çŠ¶æ…‹ã®åˆæœŸåŒ–ã¨å‹æŒ‡å®š
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const [sharedState, setSharedState] = useState<string>("åˆæœŸå€¤");
sharedState ã¯ç¾åœ¨ã®å€¤ã€‚
setSharedState ã¯ã€Dispatch<SetStateAction<string>> å‹ã€‚
çŠ¶æ…‹ã®æ›´æ–°
å€¤ã‚’ç›´æ¥æ›´æ–°:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setSharedState("æ–°ã—ã„å€¤");
é–¢æ•°ã§çŠ¶æ…‹ã‚’æ›´æ–°:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setSharedState((prevState) => prevState + " è¿½åŠ ");
ã¾ã¨ã‚
Dispatch<SetStateAction<S>> ã‚’ç”¨ã„ã‚‹ç†ç”±ã¯ã€setState é–¢æ•°ã®å‹ã‚’æ˜ç¢ºã«ã™ã‚‹ãŸã‚ã§ã™ã€‚

Dispatch ã¨ SetStateAction ã‚’çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã€ä»¥ä¸‹ã®ã‚ˆã†ãªçŠ¶æ…‹æ›´æ–°ã®æŒ™å‹•ã‚’æ­£ç¢ºã«å‹ã§è¡¨ç¾ã§ãã¾ã™:

ç›´æ¥æ–°ã—ã„å€¤ã‚’è¨­å®šã™ã‚‹ã€‚
å‰ã®å€¤ã‚’å‚ç…§ã—ã¦æ–°ã—ã„å€¤ã‚’è¨ˆç®—ã™ã‚‹ã€‚


=========================================

ã¾ã ã‚ˆãã‚ã‹ã‚‰ãªã„ã€‚
ã‚‚ã£ã¨ã‚ã‹ã‚Šã‚„ã™ãèª¬æ˜ã—ã¦ã€‚

ãã‚‚ãã‚‚Dispatchã¨ã¯Reduxã§ä½¿ã†ã®ã§ã¯ãªã„ã®ã‹ï¼Ÿ
ã‚ã¨
type SetStateAction<S> = S | ((prevState: S) => S);
ãŒç‰¹ã«ã‚ã‹ã‚‰ãªã„ã€‚
ã“ã®å ´åˆã® | ã®å½¹å‰²ã‚‚æ•™ãˆã¦ã€‚

----------------------------------------------


Dispatchã¨Reactã®é–¢ä¿‚
ç¢ºã‹ã«ã€ŒDispatch ã¯ Redux ã§ã‚ˆãä½¿ã†ã€ã¨èã„ãŸã“ã¨ãŒã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã€React è‡ªä½“ã«ã‚‚ Dispatch ã¨ã„ã†å‹ãŒã‚ã‚Šã¾ã™ã€‚

Redux ã® dispatch ã¯ã€Œã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’ç™ºè¡Œã™ã‚‹ãŸã‚ã®é–¢æ•°ã€ã§ã™ãŒã€React ã® Dispatch å‹ã¯ useState ã®ã‚ˆã†ã«ã€çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã‚’è¡¨ç¾ã™ã‚‹å‹ ã¨ã—ã¦ä½¿ã‚ã‚Œã¾ã™ã€‚æ··ä¹±ã—ã‚„ã™ã„ã§ã™ãŒã€ã“ã‚Œã¯åˆ¥ç‰©ã§ã™ã€‚

React ã® Dispatch å‹ã‚’ã‚‚ã†ä¸€åº¦ç¢ºèªã™ã‚‹ã¨:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Dispatch<A> = (value: A) => void;
ã“ã‚Œã¯ã€Œå¼•æ•° value ã‚’å—ã‘å–ã‚Šã€void ã‚’è¿”ã™é–¢æ•°ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚
SetStateActionã®èª¬æ˜
React ã® useState ãƒ•ãƒƒã‚¯ã‚’ä½¿ã†ã¨ã€çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ï¼ˆä¾‹: setStateï¼‰ãŒè¿”ã•ã‚Œã¾ã™ã€‚ãã® setState é–¢æ•°ã«æ¸¡ã›ã‚‹å€¤ã®å‹ã‚’è¡¨ã™ã®ãŒ SetStateAction ã§ã™ã€‚

å®šç¾©ã®åˆ†è§£:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type SetStateAction<S> = S | ((prevState: S) => S);
S: çŠ¶æ…‹ã®å‹ï¼ˆä¾‹: string, number, booleanï¼‰ã€‚
|: ã€Œã©ã¡ã‚‰ã‹ã€ã¨ã„ã†æ„å‘³ï¼ˆè«–ç†çš„ãªã€Œã¾ãŸã¯ã€ï¼‰ã€‚
ä¾‹ãˆã°ã€SetStateAction<string> ã¯ã€Œstring ã¾ãŸã¯ (prevState: string) => stringã€ã‚’å—ã‘å–ã‚‹ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚
ã¤ã¾ã‚Šã€SetStateAction<S> ã¯:

ç›´æ¥æ–°ã—ã„å€¤ã‚’æ¸¡ã™:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setState("æ–°ã—ã„çŠ¶æ…‹"); // ã“ã‚ŒãŒ `S` ã®éƒ¨åˆ†
é–¢æ•°ã‚’æ¸¡ã—ã¦çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setState((prevState) => prevState + " è¿½åŠ "); // ã“ã‚ŒãŒ `(prevState: S) => S` ã®éƒ¨åˆ†
React ã® Dispatch<SetStateAction<S>> ã®å½¹å‰²
React ã§ã¯ã€useState ã§å¾—ã‚‰ã‚Œã‚‹ setState é–¢æ•°ã¯æ¬¡ã®ã‚ˆã†ã«å‹å®šç¾©ã•ã‚Œã¦ã„ã¾ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type setState = Dispatch<SetStateAction<S>>;
ã“ã®å‹ãŒæ„å‘³ã™ã‚‹ã“ã¨:

æ–°ã—ã„å€¤ã‚’æ¸¡ã™å ´åˆ:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setState("æ–°ã—ã„å€¤");
ã“ã‚Œã¯ã€ŒçŠ¶æ…‹ã‚’ç›´æ¥æ–°ã—ã„å€¤ã«æ›´æ–°ã€ã—ã¾ã™ã€‚

é–¢æ•°ã‚’æ¸¡ã™å ´åˆ:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setState((prevState) => prevState + " è¿½åŠ ");
ã“ã‚Œã¯ã€Œç¾åœ¨ã®çŠ¶æ…‹ï¼ˆprevStateï¼‰ã‚’å…ƒã«ã€æ–°ã—ã„å€¤ã‚’è¨ˆç®—ã—ã¦æ›´æ–°ã€ã—ã¾ã™ã€‚

React ã® Dispatch<SetStateAction<S>> å‹ã¯ã€ã“ã®ã©ã¡ã‚‰ã®ä½¿ã„æ–¹ã«ã‚‚å¯¾å¿œã§ãã‚‹ã‚ˆã†ã«è¨­è¨ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

| ã®å½¹å‰²ï¼ˆUnion å‹ï¼‰
| ã¯ TypeScript ã® Unionï¼ˆãƒ¦ãƒ‹ã‚ªãƒ³ï¼‰å‹ ã‚’è¡¨ã—ã¾ã™ã€‚ã€Œã©ã¡ã‚‰ã‹ä¸€æ–¹ã®å‹ã§ã‚ã‚Œã°ã‚ˆã„ã€ã¨ã„ã†æ„å‘³ã§ã™ã€‚

å…·ä½“ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Example = string | number;
ã“ã®å ´åˆã€Example ã¯ã€Œstring ã¾ãŸã¯ numberã€ã¨ã„ã†å‹ã«ãªã‚Šã¾ã™ã€‚
ä¾‹:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
let value: Example;

value = "Hello"; // OK
value = 42;      // OK
value = true;    // ã‚¨ãƒ©ãƒ¼ (boolean ã¯å«ã¾ã‚Œãªã„)
Dispatch ã¨ SetStateAction ã‚’å…·ä½“ä¾‹ã§èª¬æ˜
React ã® useState ã‚’ä½¿ã£ã¦ã‚«ã‚¦ãƒ³ã‚¿ãƒ¼ã‚¢ãƒ—ãƒªã‚’ä½œã‚‹ä¾‹ã§è€ƒãˆã¾ã™ã€‚

çŠ¶æ…‹ã‚’ç®¡ç†ã™ã‚‹éƒ¨åˆ†:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const [count, setCount] = useState<number>(0);
ã“ã“ã§:

count ã®å‹ã¯ numberã€‚
setCount ã®å‹ã¯ Dispatch<SetStateAction<number>>ã€‚
çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹æ–¹æ³•:
ç›´æ¥å€¤ã‚’æ¸¡ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setCount(10); // çŠ¶æ…‹ã‚’10ã«æ›´æ–°
é–¢æ•°ã‚’æ¸¡ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
setCount((prevCount) => prevCount + 1); // ç¾åœ¨ã®çŠ¶æ…‹ã‚’å…ƒã«+1
Dispatch<SetStateAction<number>> ã®å‹å®šç¾©ã«ã‚ˆã‚Šã€ã“ã‚Œã‚‰ä¸¡æ–¹ãŒè¨±ã•ã‚Œã¦ã„ã¾ã™ã€‚

è³ªå•ã®è¦ç‚¹ã‚’æŒ¯ã‚Šè¿”ã‚‹
Dispatch ã®å½¹å‰²ã¯ï¼Ÿ
React ã§ã¯ã€ŒçŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹é–¢æ•°ã€ã®å‹ã‚’è¡¨ã™ã‚‚ã®ã€‚

SetStateAction ã®æ„å‘³ã¯ï¼Ÿ
ã€Œç›´æ¥æ–°ã—ã„å€¤ã‚’æ¸¡ã™ã€ã¾ãŸã¯ã€Œé–¢æ•°ã§çŠ¶æ…‹ã‚’æ›´æ–°ã™ã‚‹ã€ã©ã¡ã‚‰ã«ã‚‚å¯¾å¿œã™ã‚‹ãŸã‚ã®å‹ã€‚

| ã®æ„å‘³ã¯ï¼Ÿ
TypeScript ã®ã€ŒUnion å‹ã€ã‚’è¡¨ã—ã€ã€Œã©ã¡ã‚‰ã‹ã®å‹ã§ã‚ã‚Œã°OKã€ã¨ã„ã†æ„å‘³ã€‚

ä¾‹ã‚’ã‚ã‹ã‚Šã‚„ã™ãã¾ã¨ã‚ã‚‹
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
import { useState } from "react";

export default function Counter() {
  // çŠ¶æ…‹ã®åˆæœŸå€¤ã‚’0ï¼ˆnumberï¼‰ã«è¨­å®š
  const [count, setCount] = useState<number>(0);

  return (
    <div>
      <p>ç¾åœ¨ã®ã‚«ã‚¦ãƒ³ãƒˆ: {count}</p>
      <button onClick={() => setCount(count + 1)}>+1</button>
      <button onClick={() => setCount((prevCount) => prevCount - 1)}>-1</button>
    </div>
  );
}
å‹•ä½œã®ä»•çµ„ã¿:
setCount(count + 1) ã®å ´åˆ: çŠ¶æ…‹ã‚’ç›´æ¥ã€Œcount + 1ã€ã®å€¤ã«æ›´æ–°ã—ã¾ã™ã€‚

setCount((prevCount) => prevCount - 1) ã®å ´åˆ: é–¢æ•°ã‚’æ¸¡ã—ã€prevCountï¼ˆç¾åœ¨ã®çŠ¶æ…‹ï¼‰ã‚’åŸºã«æ–°ã—ã„çŠ¶æ…‹ã‚’è¨ˆç®—ã—ã¾ã™ã€‚

ã“ã®ä»•çµ„ã¿ã‚’æ”¯ãˆã¦ã„ã‚‹ã®ãŒ Dispatch<SetStateAction<S>> å‹ã§ã™ï¼


=========================================

ã¾ã dispatchãŒã„ã¾ã„ã¡ç†è§£ã§ããªã„ãŒã€typeã®ä½¿ã„æ–¹ãŒã‚ˆãã‚ã‹ã£ã¦ã„ãªã„ã®ã§
ã¾ãšãã¡ã‚‰ã®ç¢ºèªã‚’ã—ãŸã„ã€‚

type Example1 = { name: string; num: number };
ã¨ã„ã†æ›¸ãæ–¹ã¯stringå‹ã®nameã¨numberå‹ã®numã‚’æŒã¤Example1ã¨ã„ã†å‹ã ã¨ã„ã†ã®ã¯ã‚ã‹ã‚‹

ã“ã¡ã‚‰ãŒã‚ˆãã‚ã‹ã‚‰ãªã„ã€‚
type Dispatch<A> = (value: A) => void;

{}ã¯ãªãã¦ã„ã„ã®ã‹ï¼Ÿ

----------------------------------------------

type Dispatch<A> = (value: A) => void; ã®ã‚ˆã†ã« {} ã‚’ä½¿ã‚ãªã„å‹ ã¯ã€é–¢æ•°ã®å‹ã‚’è¡¨ç¾ã™ã‚‹ãŸã‚ã®æ›¸ãæ–¹ã§ã™ã€‚ã“ã‚Œã«ã¤ã„ã¦è©³ã—ãèª¬æ˜ã—ã¾ã™ã€‚

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã¨é–¢æ•°å‹ã®é•ã„
1. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹
{} ã‚’ä½¿ã†å ´åˆã¯ã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã€Œã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ ã€ã‚’å®šç¾©ã—ã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Example1 = { name: string; num: number };
ã“ã®å ´åˆã€Example1 å‹ã®å€¤ã¯æ¬¡ã®ã‚ˆã†ã«ãªã‚Šã¾ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const obj: Example1 = {
  name: "John",
  num: 42,
};
2. é–¢æ•°å‹
{} ã‚’ä½¿ã‚ãªã„å ´åˆã¯ã€ã€Œé–¢æ•°ãã®ã‚‚ã®ã®å‹ã€ã‚’å®šç¾©ã—ã¾ã™ã€‚Dispatch<A> ã®ä¾‹ã§ã¯ã€æ¬¡ã®ã‚ˆã†ã«å‹ãŒå®šç¾©ã•ã‚Œã¦ã„ã¾ã™:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Dispatch<A> = (value: A) => void;
ã“ã®å‹ãŒæ„å‘³ã™ã‚‹ã“ã¨:
ã“ã‚Œã¯ã€ŒA å‹ã®å¼•æ•° value ã‚’å—ã‘å–ã‚Šã€æˆ»ã‚Šå€¤ãŒ void ã§ã‚ã‚‹é–¢æ•°ã€ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚
å®Ÿéš›ã«ä½¿ã†å ´åˆ:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const exampleDispatch: Dispatch<string> = (value: string) => {
  console.log(value);
};

exampleDispatch("Hello, World!"); // å®Ÿè¡Œã•ã‚Œã‚‹ã¨ "Hello, World!" ã¨è¡¨ç¤º
ãªãœ {} ãŒãªã„ã®ã‹ï¼Ÿ
é–¢æ•°å‹ã§ã¯ã€é–¢æ•°ã®å¼•æ•°ã‚„æˆ»ã‚Šå€¤ã‚’ç›´æ¥å®šç¾©ã™ã‚‹ã®ã§ {} ã¯ä¸è¦ã§ã™ã€‚{} ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã‚’è¡¨ã™ã‚‚ã®ã§ã€é–¢æ•°å‹ã§ã¯ä½¿ã„ã¾ã›ã‚“ã€‚

é–¢æ•°å‹ã®åŸºæœ¬æ§‹é€ 
é–¢æ•°å‹ã®æ§‹é€ ã‚’ç†è§£ã™ã‚‹ãŸã‚ã«ã€ã‚·ãƒ³ãƒ—ãƒ«ãªä¾‹ã‚’è¦‹ã¦ã¿ã¾ã—ã‚‡ã†ã€‚

å‹ã®å®šç¾©:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type FunctionType = (arg: string) => number;
æ„å‘³:
FunctionType ã¯ã€Œå¼•æ•°ã¨ã—ã¦ string å‹ã®å€¤ã‚’å—ã‘å–ã‚Šã€number å‹ã®å€¤ã‚’è¿”ã™é–¢æ•°ã€ã®å‹ã§ã™ã€‚
ä½¿ç”¨ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const myFunction: FunctionType = (arg: string) => {
  return arg.length; // å¼•æ•°ã®æ–‡å­—æ•°ã‚’è¿”ã™
};

console.log(myFunction("Hello")); // å‡ºåŠ›: 5
Dispatch<A> ã®å…·ä½“ä¾‹
React ã®ä¾‹ã«å½“ã¦ã¯ã‚ã‚‹ã¨ã€æ¬¡ã®ã‚ˆã†ã« Dispatch ãŒä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚

å‹ã®å®šç¾©:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Dispatch<A> = (value: A) => void;
useState ã®ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const [count, setCount] = useState<number>(0);

// setCount ã®å‹ã¯ Dispatch<SetStateAction<number>> ã«åŸºã¥ã„ã¦ã„ã¾ã™ã€‚
setCount(5); // OK: ç›´æ¥å€¤ã‚’æ¸¡ã™
setCount((prev) => prev + 1); // OK: é–¢æ•°ã‚’æ¸¡ã™
setCount ã¯ Dispatch<SetStateAction<number>> å‹ã§ã™ã€‚
Dispatch<A> ã®ä¸­ã§ A ãŒ SetStateAction<number> ã«ç½®ãæ›ã‚ã‚Šã¾ã™ã€‚
(value: A) ã®éƒ¨åˆ†ã«ã€æ–°ã—ã„å€¤ã‚„é–¢æ•°ã‚’æ¸¡ã›ã‚‹ ã¨ã„ã†ä»•çµ„ã¿ã«ãªã£ã¦ã„ã¾ã™ã€‚
ã‚ˆãã‚ã‚‹è³ªå•ã¸ã®å›ç­”
Q1. ãªãœ {} ãŒãªã„ã®ã‹ï¼Ÿ
é–¢æ•°å‹ã§ã¯ {} ã¯ä¸è¦ã§ã™ã€‚ç›´æ¥ã€Œå¼•æ•°ã®å‹ã€ã¨ã€Œæˆ»ã‚Šå€¤ã®å‹ã€ã‚’æ›¸ãã¾ã™ã€‚

Q2. {} ã‚’ä½¿ã£ãŸæ›¸ãæ–¹ã¨ã®é•ã„ã¯ï¼Ÿ
{} ã‚’ä½¿ã†å ´åˆã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¡¨ç¾ã—ã¾ã™ãŒã€é–¢æ•°å‹ã§ã¯ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã§ã¯ãªãã€Œé–¢æ•°ã®æ§‹é€ ã€ã‚’è¨˜è¿°ã—ã¾ã™ã€‚

Q3. {} ã‚’ä½¿ã£ãŸæ›¸ãæ–¹ã¨ä½µç”¨ã§ãã‚‹ï¼Ÿ
ã¯ã„ã€ä½µç”¨ã§ãã¾ã™ã€‚ä¾‹ãˆã°ã€ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®ä¸­ã«é–¢æ•°ã‚’å«ã‚€å‹ã‚’ä½œæˆã§ãã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type ExampleWithFunction = {
  name: string;
  callback: (value: number) => void;
};

const example: ExampleWithFunction = {
  name: "John",
  callback: (value: number) => {
    console.log(value);
  },
};

example.callback(42); // "42" ã¨è¡¨ç¤º
ã¾ã¨ã‚
{} ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®ãŸã‚ã«ä½¿ã‚ã‚Œã€ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã®æ§‹é€ ã‚’è¡¨ç¾ã—ã¾ã™ã€‚
é–¢æ•°å‹ã§ã¯ {} ã‚’ä½¿ã‚ãšã«ã€å¼•æ•°ã¨æˆ»ã‚Šå€¤ã‚’ç›´æ¥å®šç¾©ã—ã¾ã™ã€‚
Dispatch<A> ã¯ã€ŒA å‹ã®å¼•æ•°ã‚’å—ã‘å–ã‚Šã€æˆ»ã‚Šå€¤ãŒ void ã®é–¢æ•°ã€ã‚’è¡¨ã—ã¾ã™ã€‚
ã“ã‚Œã‚‰ã®é•ã„ã‚’ç†è§£ã™ã‚Œã°ã€Dispatch<A> ã®å‹ã‚‚ç†è§£ã—ã‚„ã™ããªã‚Šã¾ã™ï¼




=========================================
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒ{}ã ã¨é…åˆ—ã‚‚å‹ã«ã§ãã‚‹ã‹ï¼Ÿ
ãã®éš›ã¯[]ã‚’ä½¿ã†ã®ã‹ï¼Ÿ

----------------------------------------------
ãã®éš›ã¯[]ã‚’ä½¿ã†ã®ã‹ï¼Ÿ
ChatGPT:
ChatGPT
TypeScriptã§ã¯ã€é…åˆ—ã®å‹ã‚‚å®šç¾©ã§ãã¾ã™ã€‚é…åˆ—ã®å‹ã‚’æŒ‡å®šã™ã‚‹å ´åˆã¯ã€[] ã‚„ Array<T> ã‚’ä½¿ã†æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚

é…åˆ—ã®å‹å®šç¾©
1. [] ã‚’ä½¿ã†æ–¹æ³•
TypeScriptã§ã¯ã€å‹ã®å¾Œã‚ã« [] ã‚’ã¤ã‘ã‚‹ã“ã¨ã§ã€Œãã®å‹ã®é…åˆ—ã€ã‚’è¡¨ç¾ã—ã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const numbers: number[] = [1, 2, 3]; // æ•°å­—ã®é…åˆ—
const strings: string[] = ["a", "b", "c"]; // æ–‡å­—åˆ—ã®é…åˆ—
const objects: { name: string; age: number }[] = [
  { name: "Alice", age: 25 },
  { name: "Bob", age: 30 },
]; // ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—
number[] â†’ æ•°å€¤å‹ã®é…åˆ—
string[] â†’ æ–‡å­—åˆ—å‹ã®é…åˆ—
{ name: string; age: number }[] â†’ ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®é…åˆ—
2. Array<T> ã‚’ä½¿ã†æ–¹æ³•
TypeScriptã§ã¯ã€Array<T> ã®ã‚ˆã†ã«ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ã¦é…åˆ—ã®å‹ã‚’è¡¨ã™ã“ã¨ã‚‚ã§ãã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const numbers: Array<number> = [1, 2, 3];
const strings: Array<string> = ["a", "b", "c"];
const objects: Array<{ name: string; age: number }> = [
  { name: "Alice", age: 25 },
  { name: "Bob", age: 30 },
];
Array<number> â†’ æ•°å€¤å‹ã®é…åˆ—
Array<string> â†’ æ–‡å­—åˆ—å‹ã®é…åˆ—
Array<{ name: string; age: number }> â†’ ç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®é…åˆ—
[] ã¨ Array<T> ã®é•ã„
ã©ã¡ã‚‰ã‚’ä½¿ã£ã¦ã‚‚åŒã˜æ„å‘³ã«ãªã‚Šã¾ã™ãŒã€ä¸€èˆ¬çš„ã«ã¯ [] ã®æ–¹ãŒç°¡æ½”ã§èª­ã¿ã‚„ã™ã„ãŸã‚ã€åºƒãä½¿ã‚ã‚Œã¦ã„ã¾ã™ã€‚

å¥½ã¿ã‚„å ´é¢ã«ã‚ˆã‚‹é¸æŠ
[] ã®æ–¹ãŒç›´æ„Ÿçš„: ã‚ˆã‚ŠçŸ­ãã€ã‚³ãƒ¼ãƒ‰ãŒã‚·ãƒ³ãƒ—ãƒ«ã«ãªã‚Šã¾ã™ã€‚
Array<T> ã¯ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨çµ±ä¸€æ„ŸãŒã‚ã‚‹: ä»–ã®ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã‚’ä½¿ã£ãŸå‹ã¨çµ±ä¸€ã—ã¦è¨˜è¿°ã§ãã¾ã™ã€‚
é…åˆ—ã‚’ä½¿ã£ãŸå‹ã®ä¾‹
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—
é…åˆ—ãŒç‰¹å®šã®ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§æ§‹æˆã•ã‚Œã‚‹å ´åˆã€æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã—ã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type User = { id: number; name: string };

const users: User[] = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" },
];

const moreUsers: Array<User> = [
  { id: 3, name: "Charlie" },
  { id: 4, name: "Dana" },
];
é…åˆ—å†…ã®å‹ã‚’è¤‡æ•°æŒ‡å®š
é…åˆ—ã®ä¸­ã«è¤‡æ•°ã®å‹ã‚’æŒãŸã›ã‚‹å ´åˆã¯ã€(å‹1 | å‹2)[] ã®ã‚ˆã†ã«æ›¸ãã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const mixed: (number | string)[] = [1, "two", 3, "four"];

const mixedObjects: ({ name: string } | { age: number })[] = [
  { name: "Alice" },
  { age: 25 },
];
number | string â†’ æ•°å€¤ã¨æ–‡å­—åˆ—ã‚’æ··åœ¨ã•ã›ãŸé…åˆ—
{ name: string } | { age: number } â†’ ãã‚Œãã‚Œç•°ãªã‚‹å‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’å«ã‚€é…åˆ—
é…åˆ—ã®å‹ã«åˆ¶ç´„ã‚’æŒãŸã›ã‚‹æ–¹æ³• (ã‚¿ãƒ—ãƒ«)
ã€Œé…åˆ—ã®é•·ã•ã€ã‚„ã€Œå„è¦ç´ ã®å‹ã€ã«åˆ¶ç´„ã‚’ã‹ã‘ãŸã„å ´åˆã¯ã€ã‚¿ãƒ—ãƒ«ã‚’ä½¿ã„ã¾ã™ã€‚

ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
const tuple: [string, number, boolean] = ["Alice", 25, true];
tuple[0] ã¯ string å‹
tuple[1] ã¯ number å‹
tuple[2] ã¯ boolean å‹
çµè«–
é…åˆ—ã®å‹ã‚’å®šç¾©ã™ã‚‹å ´åˆã¯ã€[] ã‚„ Array<T> ã‚’ä½¿ã„ã¾ã™ã€‚
{} ã‚’ä½¿ã†ã®ã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®å ´åˆã§ã€é…åˆ—å‹ã§ã¯ [] ã‚„ Array ãŒé©åˆ‡ã§ã™ã€‚
å¥½ã¿ã«å¿œã˜ã¦ã€[] ã¾ãŸã¯ Array<T> ã‚’ä½¿ã„åˆ†ã‘ã¦å•é¡Œã‚ã‚Šã¾ã›ã‚“ã€‚


=========================================
é…åˆ—ã®å‹ã¯typeã¯ä½¿ã‚ãªã„ã®ã‹ï¼Ÿ

----------------------------------------------
é…åˆ—ã®å‹ã«ã‚‚ type ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¾ã™ï¼ type ã‚’ä½¿ã†ã“ã¨ã§ã€é…åˆ—å…¨ä½“ã®å‹ã‚’ã‚ã‹ã‚Šã‚„ã™ãåå‰ä»˜ãã§å®šç¾©ã™ã‚‹ ã“ã¨ãŒã§ãã¾ã™ã€‚

é…åˆ—ã®å‹ã‚’ type ã§å®šç¾©ã™ã‚‹æ–¹æ³•
1. ã‚·ãƒ³ãƒ—ãƒ«ãªå‹å®šç¾©
ä¾‹ãˆã°ã€æ•°å€¤å‹ã®é…åˆ—ã‚„æ–‡å­—åˆ—å‹ã®é…åˆ—ã‚’ type ã‚’ä½¿ã£ã¦å®šç¾©ã§ãã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type NumberArray = number[]; // æ•°å€¤ã®é…åˆ—
type StringArray = string[]; // æ–‡å­—åˆ—ã®é…åˆ—

const numbers: NumberArray = [1, 2, 3];
const strings: StringArray = ["a", "b", "c"];
2. ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—ã‚’å‹å®šç¾©
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã®é…åˆ—ã«ã‚‚ type ã‚’ä½¿ãˆã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type User = {
  id: number;
  name: string;
};

type UserArray = User[]; // Userå‹ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®é…åˆ—

const users: UserArray = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" },
];
3. è¤‡æ•°ã®å‹ãŒæ··åœ¨ã™ã‚‹é…åˆ—ã®å‹å®šç¾©
é…åˆ—ã®ä¸­ã«ç•°ãªã‚‹å‹ã®å€¤ãŒå«ã¾ã‚Œã‚‹å ´åˆã‚‚ã€type ã‚’ä½¿ã£ã¦è¡¨ç¾ã§ãã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type MixedArray = (string | number)[];

const mixed: MixedArray = [1, "two", 3, "four"];
4. ã‚¿ãƒ—ãƒ«ã‚’å‹å®šç¾©
ã‚¿ãƒ—ãƒ«ï¼ˆç‰¹å®šã®é †åºã¨å‹ã®å›ºå®šé•·é…åˆ—ï¼‰ã‚‚ type ã§å®šç¾©ã§ãã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type UserInfo = [string, number, boolean];

const userInfo: UserInfo = ["Alice", 25, true];
5. Array<T> ã¨çµ„ã¿åˆã‚ã›ãŸå‹å®šç¾©
Array<T> ã‚‚ type ã‚’ä½¿ã£ã¦åå‰ã‚’ã¤ã‘ã‚‰ã‚Œã¾ã™ã€‚

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type NumberArray = Array<number>;
type UserArray = Array<{ id: number; name: string }>;

const numbers: NumberArray = [10, 20, 30];
const users: UserArray = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" },
];
çµè«–
type ã¯é…åˆ—ã®å‹ã‚’åå‰ä»˜ãã§å†åˆ©ç”¨å¯èƒ½ã«ã™ã‚‹ãŸã‚ã«ä¾¿åˆ©ã§ã™ã€‚

ã‚·ãƒ³ãƒ—ãƒ«ãªé…åˆ—å‹ï¼ˆnumber[] ãªã©ï¼‰ã¯ãã®ã¾ã¾ä½¿ã£ã¦ã‚‚OKã€‚
å†åˆ©ç”¨æ€§ã‚„å¯èª­æ€§ã‚’é«˜ã‚ãŸã„å ´åˆã¯ã€type ã‚’ä½¿ã£ã¦å‹ã‚’å®šç¾©ã—ã¾ã—ã‚‡ã†ã€‚
ä¾‹:
typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
// å†åˆ©ç”¨æ€§ãŒä½ã„ã‚³ãƒ¼ãƒ‰
const users: { id: number; name: string }[] = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" },
];

// å†åˆ©ç”¨æ€§ãŒé«˜ã„ã‚³ãƒ¼ãƒ‰
type User = { id: number; name: string };
type UserArray = User[];

const users: UserArray = [
  { id: 1, name: "Alice" },
  { id: 2, name: "Bob" },
];



=========================================
ä¾‹æ–‡ã§
type setState = Dispatch<SetStateAction<S>>;
ã¨ã‹æ›¸ã„ã¦ã‚ã£ãŸã®ã¯Reactã®è¦‹ãˆãªã„ã¨ã“ã‚ã§å®Ÿéš›ã«
setState ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹ã¨ã„ã†ã“ã¨ã‚’ä¼ãˆã¦ãŸã®ã‹ï¼Ÿ
ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã«ã¯åŸºæœ¬çš„ã«è¦‹ãˆãªã„ã¨ã“ã‚ã‹ï¼Ÿ

----------------------------------------------
ãã®é€šã‚Šã§ã™ï¼ type setState = Dispatch<SetStateAction<S>>; ã¨ã„ã†è¨˜è¿°ã¯ã€ React ã®å†…éƒ¨ã§å®Ÿéš›ã«å‹ãŒã©ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‹ ã‚’ç¤ºã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯ React ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ@types/reactï¼‰ã«æ›¸ã‹ã‚Œã¦ãŠã‚Šã€ ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒé€šå¸¸ã®é–‹ç™ºã§ç›´æ¥è¦‹ã‚‹å¿…è¦ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚ã—ã‹ã—ã€TypeScript ã‚’ä½¿ã†ã¨ React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å‹ã‚’æ˜ç¤ºçš„ã«æ‰±ã†ãŸã‚ã«ã€ã“ã‚Œã‚‰ã®å‹å®šç¾©ãŒé‡è¦ã«ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

èƒŒæ™¯ã¨è©³ç´°
React ãŒæä¾›ã™ã‚‹ useState ãƒ•ãƒƒã‚¯ã¯ã€å®Ÿéš›ã«ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«å‹å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚

React å†…éƒ¨ã®å‹å®šç¾©ã®ä»•çµ„ã¿
SetStateAction å‹

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type SetStateAction<S> = S | ((prevState: S) => S);
S ã¯çŠ¶æ…‹ï¼ˆstateï¼‰ã®å‹ã‚’è¡¨ã™ã‚¸ã‚§ãƒãƒªãƒƒã‚¯ã§ã™ã€‚
SetStateAction<S> ã¯ã€æ¬¡ã®2ã¤ã®å‹ã®ã„ãšã‚Œã‹ã§çŠ¶æ…‹ã‚’æ›´æ–°ã§ãã‚‹ã“ã¨ã‚’è¡¨ã—ã¾ã™ã€‚
ç›´æ¥æ–°ã—ã„å€¤ã‚’æ¸¡ã™: S
å‰ã®çŠ¶æ…‹ã«åŸºã¥ã„ã¦æ–°ã—ã„å€¤ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã‚’æ¸¡ã™: (prevState: S) => S
Dispatch å‹

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type Dispatch<A> = (value: A) => void;
Dispatch ã¯ã€value ã‚’å¼•æ•°ã«å—ã‘å–ã£ã¦ä½•ã‚‚è¿”ã•ãªã„ï¼ˆvoidï¼‰é–¢æ•°ã®å‹ã§ã™ã€‚
çŠ¶æ…‹æ›´æ–°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’å®Ÿè¡Œã™ã‚‹é–¢æ•°ã‚’è¡¨ã—ã¾ã™ã€‚
setState ã®å®Œå…¨ãªå‹ React å†…éƒ¨ã§ã¯ã€setState ã¯æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ï¼š

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
type setState<S> = Dispatch<SetStateAction<S>>;
ã¤ã¾ã‚Šã€setState ã¯ã€ŒçŠ¶æ…‹ã‚’ç›´æ¥è¨­å®šã™ã‚‹å€¤ã€ã¾ãŸã¯ã€ŒçŠ¶æ…‹ã‚’è¨ˆç®—ã™ã‚‹é–¢æ•°ã€ã‚’å¼•æ•°ã«å—ã‘å–ã‚‹é–¢æ•°ã§ã™ã€‚
React ã§ã®ä½¿ç”¨ä¾‹
é–‹ç™ºè€…ãŒ useState ã‚’ä½¿ã†éš›ã€ã“ã‚Œã‚‰ã®å†…éƒ¨ã®å‹å®šç¾©ã¯é€šå¸¸è¦‹ãˆã¾ã›ã‚“ã€‚ã—ã‹ã—ã€TypeScript ã‚’ä½¿ã†ã“ã¨ã§ã€useState ã®å‹ãŒè‡ªå‹•çš„ã«æ¨è«–ã•ã‚Œã‚‹ä»•çµ„ã¿ãŒã‚ã‚‹ã®ã§ã™ã€‚

ä¾‹:

typescript
ã‚³ãƒ¼ãƒ‰ã‚’ã‚³ãƒ”ãƒ¼ã™ã‚‹
import React, { useState } from "react";

function Counter() {
  // çŠ¶æ…‹ã¨ãã®å‹ãŒæ¨è«–ã•ã‚Œã‚‹ï¼ˆæ•°å€¤å‹ï¼‰
  const [count, setCount] = useState(0);

  const increment = () => setCount((prev) => prev + 1); // å‹ãŒè£œå®Œã•ã‚Œã‚‹

  return (
    <div>
      <p>{count}</p>
      <button onClick={increment}>+1</button>
    </div>
  );
}
çµè«–
setState ã®å‹å®šç¾©ï¼ˆDispatch<SetStateAction<S>>ï¼‰ ã¯ã€React å†…éƒ¨ã§å®šç¾©ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼å´ã«ã¯ç›´æ¥è¦‹ãˆã¾ã›ã‚“ã€‚é€šå¸¸ã€TypeScript ãŒè‡ªå‹•çš„ã«å‹æ¨è«–ã—ã¦ãã‚Œã¾ã™ã€‚
ãŸã ã—ã€React ã®å‹å®šç¾©ã‚’ç†è§£ã™ã‚‹ã¨ã€useState ã®æŒ™å‹•ã‚„å‹ã‚¨ãƒ©ãƒ¼ã®åŸå› ã‚’ã‚ˆã‚Šæ·±ãç†è§£ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚
ã‚‚ã—å‹å®šç¾©ãŒã€Œè¦‹ãˆãªã„ä»•çµ„ã¿ã€ã§åˆ†ã‹ã‚Šã«ãã„å ´åˆã¯ã€React ã®å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚„ TypeScript ã®å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆ@types/reactï¼‰ã‚’ç¢ºèªã—ã¦ã¿ã‚‹ã®ã‚‚è‰¯ã„ã§ã—ã‚‡ã†ã€‚









=========================================


----------------------------------------------



=========================================


----------------------------------------------



=========================================


----------------------------------------------








